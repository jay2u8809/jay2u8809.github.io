"use strict";(self.webpackChunkonigiri=self.webpackChunkonigiri||[]).push([[5024],{65380:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>d});var t=s(54146),i=s(74848),a=s(28453);const l={slug:"2024-08-14-how-to-use-log-insights-query",title:"AWS Cloudwatch - \ub85c\uadf8\ub97c \uac04\ud3b8\ud558\uac8c \uac80\uc0c9\ud558\ub294 \ubc29\ubc95",authors:["devian"],tags:["devian-lab","dev-posts","aws","cloudwatch","log insights"],keywords:["devian-lab","Job\u02d0\u8ac7","aws","cloudwatch","log","loginsight"],description:"AWS Cloudwatch \uc758 \ub85c\uadf8\ub97c Log Insights \ub97c \uc774\uc6a9\ud574 \uac04\ud3b8\ud558\uac8c \uac80\uc0c9\ud574 \ubcf8\ub2e4."},o=void 0,r={authorsImageUrls:[void 0]},d=[{value:"[Job\u02d0\u8ac7] Log Insights \ub85c CloudWatch Log \uac80\uc0c9\ud558\uae30",id:"job\u02d0\u8ac7-log-insights-\ub85c-cloudwatch-log-\uac80\uc0c9\ud558\uae30",level:2},{value:"Intro",id:"intro",level:2},{value:"CloudWatch \uc758 \ub85c\uadf8 \uad6c\uc870",id:"cloudwatch-\uc758-\ub85c\uadf8-\uad6c\uc870",level:2},{value:"Log Insight \ub97c \uc0ac\uc6a9\ud574\uc57c\ud558\ub294 \uc774\uc720",id:"log-insight-\ub97c-\uc0ac\uc6a9\ud574\uc57c\ud558\ub294-\uc774\uc720",level:2},{value:"Log Insights Query",id:"log-insights-query",level:2},{value:"\uc8fc\uc758\uc810",id:"\uc8fc\uc758\uc810",level:2}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"job\u02d0\u8ac7-log-insights-\ub85c-cloudwatch-log-\uac80\uc0c9\ud558\uae30",children:"[Job\u02d0\u8ac7] Log Insights \ub85c CloudWatch Log \uac80\uc0c9\ud558\uae30"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"  author: Dev.ian\n  createdAt: 2024-05-21\n  updatedAt: 2024-08-14\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:'"AWS Cloudatch \uc758 Log Insights \ub97c \uc774\uc6a9\ud574 Cloudwatch \uc758 Log \ub97c \uac80\uc0c9\ud55c\ub2e4."'}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"intro",children:"Intro"}),"\n",(0,i.jsx)(n.p,{children:"\uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uc7a5\uc560\uac00 \ubc1c\uc0dd\ud558\uac70\ub098 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud588\uc744 \ub54c \ub610\ub294 \uc0ac\uc6a9\uc790User\ub85c\ubd80\ud130\uc758 \ubb38\uc758\ub97c \ubc1b\uc558\uc744 \ub54c, \uac00\uc7a5 \uba3c\uc800\ud574\uc57c \ud560 \uc77c\uc740? \ub2f9\uc5f0\ud788 \ub85c\uadf8Log\ub97c \ucc3e\uc544\ubcf4\ub294 \uc77c\uc774\ub2e4."}),"\n",(0,i.jsxs)(n.p,{children:["\ud604\uc7ac \uc6b4\uc601 \uc911\uc778 \uc11c\ube44\uc2a4\ub294 \uae30\ubcf8\uc801\uc73c\ub85c AWS \uc11c\ube44\uc2a4(",(0,i.jsx)(n.code,{children:"API Gateway + AWS Lambda + DynamoDB"}),")\ub97c \uc774\uc6a9\ud55c Serverless \uc544\ud0a4\ud14d\uccd0 \uae30\ubc18\uc774\ub2e4. \ub85c\uadf8\ub294 ",(0,i.jsx)(n.strong,{children:"CloudWatch + S3"}),"\ub97c \uc774\uc6a9\ud574 \uc800\uc7a5\ud558\uace0 \uc788\ub2e4."]}),"\n",(0,i.jsxs)(n.p,{children:["CloudWatch \ub294 \uc2e4\ud589\ud55c AWS Lambda \uc758 \uc778\uc2a4\ud134\uc2a4\ub97c \uae30\uc900\uc73c\ub85c \ub85c\uadf8\ub97c \uae30\ub85d\ud558\uae30 \ub54c\ubb38\uc5d0 \uc6d0\ud558\ub294 \ub85c\uadf8\ub97c \uc815\ud655\ud558\uac8c \uac80\uc0c9\ud558\uae30\uac00 \uc5b4\ub835\ub2e4. \ub54c\ubb38\uc5d0 ",(0,i.jsx)(n.code,{children:"Log Insight"})," \ub77c\ub294 \uc11c\ube44\uc2a4\ub97c \uc774\uc6a9\ud558\uba74, Query \ub97c \uc774\uc6a9\ud574 \uac04\ub2e8\ud558\uac8c CloudWatch \ub85c\uadf8\ub97c \uac80\uc0c9\ud560 \uc218 \uc788\ub2e4."]}),"\n",(0,i.jsxs)(n.p,{children:["\uc774\ubc88 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c\ub294 CloudWatch \uc758 \ub85c\uadf8\ub97c \uc27d\uac8c \uac80\uc0c9\ud558\uae30 \uc704\ud55c ",(0,i.jsx)(n.strong,{children:"Log Insight \uc758 \uc0ac\uc6a9 \ubc29\ubc95"})," \uc744 \uc815\ub9ac\ud55c\ub2e4."]}),"\n",(0,i.jsx)(n.h2,{id:"cloudwatch-\uc758-\ub85c\uadf8-\uad6c\uc870",children:"CloudWatch \uc758 \ub85c\uadf8 \uad6c\uc870"}),"\n",(0,i.jsxs)(n.p,{children:["CloudWatch \ub294 \ub85c\uadf8\ub97c \ub85c\uadf8 \uadf8\ub8f9(Log Group)\uacfc \ub85c\uadf8 \uc2a4\ud2b8\ub9bc(",(0,i.jsx)(n.code,{children:"Log Stream"}),")\uc774\ub77c\ub294 \ub2e8\uc704\ub85c \uc791\uc131\ud558\uace0 \uc800\uc7a5\ud55c\ub2e4. ",(0,i.jsx)(n.strong,{children:"\ub85c\uadf8 \uadf8\ub8f9\uc740 \ub85c\uadf8 \uc2a4\ud2b8\ub9bc\uc758 \ubaa8\uc74c\uc774\uba70 \ub85c\uadf8\uc2a4\ud2b8\ub9bc\uc5d0 \uc2e4\uc81c \ub85c\uadf8\uac00 \uae30\ub85d"})," \ub41c\ub2e4."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/Working-with-log-groups-and-streams.html",children:"\ub85c\uadf8 \uadf8\ub8f9 \ubc0f \ub85c\uadf8 \uc2a4\ud2b8\ub9bc \uc791\uc5c5"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Serverless Framwork \ub97c \uc608\ub97c \ub4e4\uc5b4 \uc544\ub798\uc758 yaml \uc744 \ubcf4\uba74, exmple-service \uc5d0 \ud574\ub2f9\ud558\ub294 \ub85c\uadf8 \uadf8\ub8f9\uc774 \uc0dd\uc131\ub418\uace0, exampleLambdaIndex, exampleLambdaStatistics \ub77c\ub294 Lambda \ub4e4(\ud639\uc740 API Gateway \ub098 \ub2e4\ub978 \ub9ac\uc18c\uc2a4)\uc774 \uc2e4\ud589\ub420 \ub54c\ub9c8\ub2e4 \uac01\uac01\uc758 \ub85c\uadf8 \uc2a4\ud2b8\ub9bc\uc744 \ub9cc\ub4e4\uc5b4 \ub85c\uadf8\ub97c \uc800\uc7a5\ud55c\ub2e4."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"  service: example-service  # Log Group Name: example-service-dev, example-service-prod, ...\n\n  provider:\n    name: aws\n    region: ap-northeast-2\n\n  functions: \n    exampleLambdaIndex: # Log Stream\n      handler: path\n      ...\n    exampleLambdaStatistics:  # Log Stream\n      handler: path\n"})}),"\n",(0,i.jsx)(n.h2,{id:"log-insight-\ub97c-\uc0ac\uc6a9\ud574\uc57c\ud558\ub294-\uc774\uc720",children:"Log Insight \ub97c \uc0ac\uc6a9\ud574\uc57c\ud558\ub294 \uc774\uc720"}),"\n",(0,i.jsx)(n.p,{children:"\ubb38\uc81c\ub294 \uc774 \ub85c\uadf8 \uc2a4\ud2b8\ub9bc\uc744 \uc774\uc6a9\ud574 \uc6d0\ud558\ub294 \ub85c\uadf8\ub97c \ud655\uc778\ud558\uae30 \uc5b4\ub835\ub2e4\ub294 \uac83\uc774\ub2e4."}),"\n",(0,i.jsx)(n.p,{children:"AWS Lambda \uc758 \uacbd\uc6b0, \ub85c\uadf8 \uc2a4\ud2b8\ub9bc\uc740 lambda \uac00 \uc2e4\ud589\ub41c \uc778\uc2a4\ud134\uc2a4\ub97c \uae30\uc900\uc73c\ub85c \uc0dd\uc131\ub41c\ub2e4. 1\uac1c\uc758 lambda \uc778\uc2a4\ud134\uc2a4\ub2f9 1\uac1c\uc758 \ub85c\uadf8 \uc2a4\ud2b8\ub9bc\uc774 \uc0dd\uc131\ub41c\ub2e4."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"lambda \uac00 \uc2e4\ud589\ub418\uba74\uc11c 1\uac1c\uc758 \ub85c\uadf8 \uc2a4\ud2b8\ub9bc\uc744 \ub9cc\ub4e4\uace0 \ub85c\uadf8\ub97c \uc791\uc131\ud55c\ub2e4."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"1)\uc758 \ucc98\ub9ac\uac00 \ub05d\ub098\uae30 \uc804\uc5d0 \ub610\ub2e4\uc2dc \ub9ac\ud018\uc2a4\ud2b8\uac00 \uc788\ub2e4\uba74 \ub2e4\ub978 lambda \uac00 \uc2e4\ud589\ub418\uace0 \ubcc4\ub3c4\uc758 \ub85c\uadf8 \uc2a4\ud2b8\ub9bc\uc744 \ub9cc\ub4e4\uc5b4 \ub85c\uadf8\ub97c \uc791\uc131\ud55c\ub2e4."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"1)\uc758 \ucc98\ub9ac\uac00 \ub05d\ub09c \ub4a4, lambda \uc778\uc2a4\ud134\uc2a4\uac00 \uc0ac\ub77c\uc9c0\uae30 \uc804\uc5d0 \ub610 \ub2e4\ub978 \ub9ac\ud018\uc2a4\ud2b8\uac00 \uc788\ub2e4\uba74 1)\uc758 lambda \uc778\uc2a4\ud134\uc2a4\ub97c \uc7ac\uc2e4\ud589\ud558\uc5ec \uadf8 \ucc98\ub9ac\ub97c \uc2dc\uc791\ud55c\ub2e4.(warm start)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"3)\uc758 \uacbd\uc6b0, 1)\uc758 lambda \uc778\uc2a4\ud130\uc2a4\ub97c \uadf8\ub300\ub85c \uc0ac\uc6a9\ud558\uae30\uc5d0 \uc0c8\ub85c\uc6b4 \ub85c\uadf8 \uc2a4\ud2b8\ub9bc\uc744 \ub9cc\ub4e4\uc9c0 \uc54a\uace0 1)\uc758 \ub85c\uadf8 \uc2a4\ud2b8\ub9bc\uc5d0 \uc774\uc5b4\uc11c \ub85c\uadf8\ub97c \uc791\uc131\ud55c\ub2e4."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\uc644\uc804\ud788 1)\uc758 lambda \uc778\uc2a4\ud134\uc2a4\uac00 \uc885\ub8cc\ub41c\ub2e4\uba74, \ub354\uc774\uc0c1 1)\uc758 \ub85c\uadf8 \uc2a4\ud2b8\ub9bc\uc5d0\ub294 \ub85c\uadf8\uac00 \uc791\uc131\ub418\uc9c0 \uc54a\ub294\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\n\n    participant t1 as Time1\n    participant t2 as Time2\n    participant t3 as Time3\n    participant t4 as Time4\n    participant t5 as Time5\n    \n    Note over t1, t5: Log Stream: Lambda Function1\n\n    t1 ->> t3: Lambda Function1\n\n    t2 ->> t4: Lambda Function2\n\n    t3 ->> t5: Lambda Function1\n    \n    Note over t2, t4: Log Stream: Lambda Function2\n    "}),"\n",(0,i.jsxs)(n.p,{children:["\uc774\ub7ec\ud55c \ud750\ub984\uc774\uae30\uc5d0 \uac19\uc740 \uc2dc\uac04 \ub3d9\uc548 \uc2e4\ud589(",(0,i.jsx)(n.em,{children:"\ubcd1\ub82c\ucc98\ub9ac"}),")\ub41c AWS Lambda \uac00 1000\uac1c\ub77c\uba74 1000\uac1c\uc758 \ub85c\uadf8 \uc2a4\ud2b8\ub9bc\uc774 \uc788\ub2e4\uace0 \ubcfc \uc218 \uc788\ub2e4. \uac01\uac01\uc758 \ub85c\uadf8 \uc2a4\ud2b8\ub9bc\uc740 \uc2dc\uac04 \uc21c\uc11c\ub300\ub85c \ub85c\uadf8\ub97c \uc791\uc131\ud558\uc9c0\ub9cc \ubcd1\ub82c\ucc98\ub9ac\ub85c \ub3d9\uc2dc\uc5d0 \uc791\uc131\ub41c \ub85c\uadf8 \uc2a4\ud2b8\ub9bc\uc774 \ub9ce\ub2e4\uba74 \uc774\ub97c \ud558\ub098\ud558\ub098 \ucc3e\uc544\ubcf4\ub294\uac74 \ubd88\uac00\ub2a5\uc5d0 \uac00\uae5d\ub2e4."]}),"\n",(0,i.jsxs)(n.p,{children:["\uc774\ub807\uac8c AWS Lambda \uc758 \ubcd1\ub82c\ucc98\ub9ac\ub85c \uc0dd\uc131\ub41c \uc218\ub9ce\uc740 ",(0,i.jsx)(n.strong,{children:"\ub85c\uadf8\ub4e4\uc744 \ucffc\ub9acQuery\ub85c \uac04\ud3b8\ud558\uac8c \uac80\uc0c9\ud560 \uc218 \uc788\ub294 \uc11c\ube44\uc2a4\uac00 Log Insight"})," \uc774\ub2e4."]}),"\n",(0,i.jsx)(n.h2,{id:"log-insights-query",children:"Log Insights Query"}),"\n",(0,i.jsx)(n.p,{children:"Log Insights \ub294 AWS CloudWatch \ucf58\uc194\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. \ucc3e\uace0\uc790 \ud558\ub294 \ub85c\uadf8\uc758 \ub85c\uadf8 \uadf8\ub8f9\uacfc \uc2dc\uac04\uc744 \uc9c0\uc815\ud55c \ub4a4, \uc544\ub798\uc640 \uac19\uc740 \ucffc\ub9ac\ub97c \uc774\uc6a9\ud558\uba74 \ub85c\uadf8\ub97c \uc190\uc27d\uac8c \uac80\uc0c9\ud560 \uc218 \uc788\ub2e4."}),"\n",(0,i.jsxs)(n.p,{children:["\uc880\ub354 \uc790\uc138\ud55c \ub0b4\uc6a9\uc740 ",(0,i.jsx)(n.a,{href:"/docs/aws/tips/how-to-use-log-insights-query",children:"AWS Cloudwatch - Log Insights \uac80\uc0c9 \ucffc\ub9ac"}),"\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\ub2e4."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"  filter @message like /${SEARCH_KEYWORD}/\n    | sort @timestamp desc\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\uc8fc\uc758\uc810",children:"\uc8fc\uc758\uc810"}),"\n",(0,i.jsx)(n.p,{children:"Log Insights \ub294 AWS\uac00 \uc81c\uacf5\ud558\ub294 \uc11c\ube44\uc2a4\uc774\ub2e4. \ub530\ub77c\uc11c \uac80\uc0c9 \uc6a9\ub7c9\uc5d0 \ub530\ub978 \ube44\uc6a9\uc774 \ubc1c\uc0dd\ud55c\ub2e4."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://blog.awsfundamentals.com/understanding-aws-cloudwatch-pricing-a-comprehensive-guide",children:"Understanding AWS CloudWatch Pricing: A Comprehensive Guide"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\ub610\ud55c \uac80\uc0c9\ud560 \uc218 \uc788\ub294 \ub370\uc774\ud130\uc758 \uc591\ub3c4 \ucd5c\ub300 10,000\uac1c\uc758 \uc81c\ud55c\uc774 \uc788\ub2e4."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://medium.com/@aishwaryaicerastogi/breaking-the-barrier-resolving-the-10k-log-insights-limit-in-cloudwatch-and-consolidating-records-92b206006e8",children:"\u201cBreaking the Barrier: Resolving the 10K Log Insights Limit in CloudWatch and Consolidating Records into a CSV\u201d"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var t=s(96540);const i={},a=t.createContext(i);function l(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(a.Provider,{value:n},e.children)}},54146:e=>{e.exports=JSON.parse('{"permalink":"/dev-posts/2024-08-14-how-to-use-log-insights-query","source":"@site/dev-posts/aws/tips/2024-08-14-how-to-use-log-insights-query.md","title":"AWS Cloudwatch - \ub85c\uadf8\ub97c \uac04\ud3b8\ud558\uac8c \uac80\uc0c9\ud558\ub294 \ubc29\ubc95","description":"AWS Cloudwatch \uc758 \ub85c\uadf8\ub97c Log Insights \ub97c \uc774\uc6a9\ud574 \uac04\ud3b8\ud558\uac8c \uac80\uc0c9\ud574 \ubcf8\ub2e4.","date":"2024-08-14T00:00:00.000Z","tags":[{"inline":true,"label":"devian-lab","permalink":"/dev-posts/tags/devian-lab"},{"inline":true,"label":"dev-posts","permalink":"/dev-posts/tags/dev-posts"},{"inline":true,"label":"aws","permalink":"/dev-posts/tags/aws"},{"inline":true,"label":"cloudwatch","permalink":"/dev-posts/tags/cloudwatch"},{"inline":true,"label":"log insights","permalink":"/dev-posts/tags/log-insights"}],"readingTime":5.855,"hasTruncateMarker":true,"authors":[{"name":"Dev.ian","title":"Software Engineer","url":"https://github.com/jay2u8809","imageURL":"/img/onigiri_icon.jpg","key":"devian","page":null}],"frontMatter":{"slug":"2024-08-14-how-to-use-log-insights-query","title":"AWS Cloudwatch - \ub85c\uadf8\ub97c \uac04\ud3b8\ud558\uac8c \uac80\uc0c9\ud558\ub294 \ubc29\ubc95","authors":["devian"],"tags":["devian-lab","dev-posts","aws","cloudwatch","log insights"],"keywords":["devian-lab","Job\u02d0\u8ac7","aws","cloudwatch","log","loginsight"],"description":"AWS Cloudwatch \uc758 \ub85c\uadf8\ub97c Log Insights \ub97c \uc774\uc6a9\ud574 \uac04\ud3b8\ud558\uac8c \uac80\uc0c9\ud574 \ubcf8\ub2e4."},"unlisted":false,"nextItem":{"title":"AWS Lambda - Code Storage Limit \ud574\uacb0\ubc29\ubc95","permalink":"/dev-posts/2024-06-26-how-to-set-prune-plugin"}}')}}]);