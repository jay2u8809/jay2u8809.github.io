<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Dev.ian Blog</title>
        <link>https://jay2u8809.github.io/dev-posts</link>
        <description>Dev.ian Blog</description>
        <lastBuildDate>Wed, 14 Aug 2024 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>ko</language>
        <item>
            <title><![CDATA[AWS Cloudwatch - 로그를 간편하게 검색하는 방법]]></title>
            <link>https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-use-log-insights-query</link>
            <guid>https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-use-log-insights-query</guid>
            <pubDate>Wed, 14 Aug 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[AWS Cloudwatch 의 로그를 Log Insights 를 이용해 간편하게 검색해 본다.]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="jobː談-log-insights-로-cloudwatch-log-검색하기">[Jobː談] Log Insights 로 CloudWatch Log 검색하기<a href="https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-use-log-insights-query#job%CB%90%E8%AB%87-log-insights-%EB%A1%9C-cloudwatch-log-%EA%B2%80%EC%83%89%ED%95%98%EA%B8%B0" class="hash-link" aria-label="[Jobː談] Log Insights 로 CloudWatch Log 검색하기에 대한 직접 링크" title="[Jobː談] Log Insights 로 CloudWatch Log 검색하기에 대한 직접 링크">​</a></h2>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">author</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dev.ian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">createdAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2024-05-21</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updatedAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2024-08-14</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<blockquote>
<p>"AWS Cloudatch 의 Log Insights 를 이용해 Cloudwatch 의 Log 를 검색한다."</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="intro">Intro<a href="https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-use-log-insights-query#intro" class="hash-link" aria-label="Intro에 대한 직접 링크" title="Intro에 대한 직접 링크">​</a></h2>
<p>어플리케이션의 장애가 발생하거나 에러가 발생했을 때 또는 사용자User로부터의 문의를 받았을 때, 가장 먼저해야 할 일은? 당연히 로그Log를 찾아보는 일이다.</p>
<p>현재 운영 중인 서비스는 기본적으로 AWS 서비스(<code>API Gateway + AWS Lambda + DynamoDB</code>)를 이용한 Serverless 아키텍쳐 기반이다. 로그는 <strong>CloudWatch + S3</strong>를 이용해 저장하고 있다.</p>
<p>CloudWatch 는 실행한 AWS Lambda 의 인스턴스를 기준으로 로그를 기록하기 때문에 원하는 로그를 정확하게 검색하기가 어렵다. 때문에 <code>Log Insight</code> 라는 서비스를 이용하면, Query 를 이용해 간단하게 CloudWatch 로그를 검색할 수 있다.</p>
<p>이번 포스트에서는 CloudWatch 의 로그를 쉽게 검색하기 위한 <strong>Log Insight 의 사용 방법</strong> 을 정리한다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cloudwatch-의-로그-구조">CloudWatch 의 로그 구조<a href="https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-use-log-insights-query#cloudwatch-%EC%9D%98-%EB%A1%9C%EA%B7%B8-%EA%B5%AC%EC%A1%B0" class="hash-link" aria-label="CloudWatch 의 로그 구조에 대한 직접 링크" title="CloudWatch 의 로그 구조에 대한 직접 링크">​</a></h2>
<p>CloudWatch 는 로그를 로그 그룹(Log Group)과 로그 스트림(<code>Log Stream</code>)이라는 단위로 작성하고 저장한다. <strong>로그 그룹은 로그 스트림의 모음이며 로그스트림에 실제 로그가 기록</strong> 된다.</p>
<ul>
<li><a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/Working-with-log-groups-and-streams.html" target="_blank" rel="noopener noreferrer">로그 그룹 및 로그 스트림 작업</a></li>
</ul>
<p>Serverless Framwork 를 예를 들어 아래의 yaml 을 보면, exmple-service 에 해당하는 로그 그룹이 생성되고, exampleLambdaIndex, exampleLambdaStatistics 라는 Lambda 들(혹은 API Gateway 나 다른 리소스)이 실행될 때마다 각각의 로그 스트림을 만들어 로그를 저장한다.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service  </span><span class="token comment" style="color:#999988;font-style:italic"># Log Group Name: example-service-dev, example-service-prod, ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">provider</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> aws</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">region</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ap</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">northeast</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">functions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">exampleLambdaIndex</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Log Stream</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">handler</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">exampleLambdaStatistics</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Log Stream</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">handler</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> path</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="log-insight-를-사용해야하는-이유">Log Insight 를 사용해야하는 이유<a href="https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-use-log-insights-query#log-insight-%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%95%BC%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0" class="hash-link" aria-label="Log Insight 를 사용해야하는 이유에 대한 직접 링크" title="Log Insight 를 사용해야하는 이유에 대한 직접 링크">​</a></h2>
<p>문제는 이 로그 스트림을 이용해 원하는 로그를 확인하기 어렵다는 것이다.</p>
<p>AWS Lambda 의 경우, 로그 스트림은 lambda 가 실행된 인스턴스를 기준으로 생성된다. 1개의 lambda 인스턴스당 1개의 로그 스트림이 생성된다.</p>
<ol>
<li>
<p>lambda 가 실행되면서 1개의 로그 스트림을 만들고 로그를 작성한다.</p>
</li>
<li>
<p>1)의 처리가 끝나기 전에 또다시 리퀘스트가 있다면 다른 lambda 가 실행되고 별도의 로그 스트림을 만들어 로그를 작성한다.</p>
</li>
<li>
<p>1)의 처리가 끝난 뒤, lambda 인스턴스가 사라지기 전에 또 다른 리퀘스트가 있다면 1)의 lambda 인스턴스를 재실행하여 그 처리를 시작한다.(warm start)</p>
</li>
<li>
<p>3)의 경우, 1)의 lambda 인스터스를 그대로 사용하기에 새로운 로그 스트림을 만들지 않고 1)의 로그 스트림에 이어서 로그를 작성한다.</p>
</li>
<li>
<p>완전히 1)의 lambda 인스턴스가 종료된다면, 더이상 1)의 로그 스트림에는 로그가 작성되지 않는다.</p>
</li>
</ol>
<!-- -->
<p>이러한 흐름이기에 같은 시간 동안 실행(<em>병렬처리</em>)된 AWS Lambda 가 1000개라면 1000개의 로그 스트림이 있다고 볼 수 있다. 각각의 로그 스트림은 시간 순서대로 로그를 작성하지만 병렬처리로 동시에 작성된 로그 스트림이 많다면 이를 하나하나 찾아보는건 불가능에 가깝다.</p>
<p>이렇게 AWS Lambda 의 병렬처리로 생성된 수많은 <strong>로그들을 쿼리Query로 간편하게 검색할 수 있는 서비스가 Log Insight</strong> 이다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="log-insights-query">Log Insights Query<a href="https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-use-log-insights-query#log-insights-query" class="hash-link" aria-label="Log Insights Query에 대한 직접 링크" title="Log Insights Query에 대한 직접 링크">​</a></h2>
<p>Log Insights 는 AWS CloudWatch 콘솔에서 사용할 수 있다. 찾고자 하는 로그의 로그 그룹과 시간을 지정한 뒤, 아래와 같은 쿼리를 이용하면 로그를 손쉽게 검색할 수 있다.</p>
<p>좀더 자세한 내용은 <a href="https://jay2u8809.github.io/docs/aws/tips/how-to-use-log-insights-query">AWS Cloudwatch - Log Insights 검색 쿼리</a>에서 확인할 수 있다.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  filter @message like /${SEARCH_KEYWORD}/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | sort @timestamp desc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복�사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="주의점">주의점<a href="https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-use-log-insights-query#%EC%A3%BC%EC%9D%98%EC%A0%90" class="hash-link" aria-label="주의점에 대한 직접 링크" title="주의점에 대한 직접 링크">​</a></h2>
<p>Log Insights 는 AWS가 제공하는 서비스이다. 따라서 검색 용량에 따른 비용이 발생한다.</p>
<ul>
<li><a href="https://blog.awsfundamentals.com/understanding-aws-cloudwatch-pricing-a-comprehensive-guide" target="_blank" rel="noopener noreferrer">Understanding AWS CloudWatch Pricing: A Comprehensive Guide</a></li>
</ul>
<p>또한 검색할 수 있는 데이터의 양도 최대 10,000개의 제한이 있다.</p>
<ul>
<li><a href="https://medium.com/@aishwaryaicerastogi/breaking-the-barrier-resolving-the-10k-log-insights-limit-in-cloudwatch-and-consolidating-records-92b206006e8" target="_blank" rel="noopener noreferrer">“Breaking the Barrier: Resolving the 10K Log Insights Limit in CloudWatch and Consolidating Records into a CSV”</a></li>
</ul>]]></content:encoded>
            <category>devian-lab</category>
            <category>dev-posts</category>
            <category>aws</category>
            <category>cloudwatch</category>
            <category>log insights</category>
        </item>
        <item>
            <title><![CDATA[AWS Lambda - Code Storage Limit 해결방법]]></title>
            <link>https://jay2u8809.github.io/dev-posts/2024-06-26-how-to-set-prune-plugin</link>
            <guid>https://jay2u8809.github.io/dev-posts/2024-06-26-how-to-set-prune-plugin</guid>
            <pubDate>Wed, 26 Jun 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[AWS Lambda 의 Code Storage Limit 해결방법]]></description>
            <content:encoded><![CDATA[<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">author</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dev.ian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">createdAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2024-06-26</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updatedAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2024-08-14</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<blockquote>
<p>"Serverless Framework 의 Prune Plugin 으로 AWS Lambda 의 Code Storage Limit 을 해결한다."</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="intro">Intro<a href="https://jay2u8809.github.io/dev-posts/2024-06-26-how-to-set-prune-plugin#intro" class="hash-link" aria-label="Intro에 대한 직접 링크" title="Intro에 대한 직접 링크">​</a></h2>
<p>AWS 를 이용한 Serverless 아키텍쳐로 서비스를 운영한다면 AWS Lambda 를 반드시 쓰게 된다. AWS Lambda 는 가장 간편하고 저렴하며 활용도가 높은 서비스 중 하나이기에 다양한 처리에 사용할 수 있다.</p>
<p>지금 운영 중인 서비스에서는 크게 아래와 같이 3가지 용도로 AWS Lambda 를 사용하고 있다.</p>
<blockquote>
<ol>
<li>15분 이내의 간단한 배치Batch 처리</li>
<li>"API Gateway + AWS Lambda" 조합으로 Web Server 로 활용</li>
<li>Step Function 이나 다른 AWS 리소스의 이벤트 전후처리(Cloudfront Edge Function, S3 이미지 업로드 시 썸네일 생성 등) 같은 트랜잭션의 한 부분으로 활용</li>
</ol>
</blockquote>
<p>이렇듯 활용도가 높은 AWS Lambda 이기에 넋 놓고 쓰다보면 금방 코드 스토리지가 부족해질 수 있다.</p>
<ul>
<li>AWS Lambda 의 코드 스토리지는 <code>75GB</code>이다.<!-- -->
<ul>
<li>Refs: <a href="https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-limits.html#compute-and-storage" target="_blank" rel="noopener noreferrer">Lambda quotas</a></li>
</ul>
</li>
</ul>
<p>실제로 최근에 Serverless Framework(<em>이하 sls</em>) 로 deploy 하던 중 <code>Code storage limit exceeded</code> 에러가 났다. 이번 기회에 AWS Lambda 의 코드 스토리지를 효율적으로 관리할 수 있도록 sls 설정을 하고 그 방법에 대해 정리해 본다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="aws-lambda-code-storage">AWS Lambda Code Storage?<a href="https://jay2u8809.github.io/dev-posts/2024-06-26-how-to-set-prune-plugin#aws-lambda-code-storage" class="hash-link" aria-label="AWS Lambda Code Storage?에 대한 직접 링크" title="AWS Lambda Code Storage?에 대한 직접 링크">​</a></h2>
<p>AWS Lambda 는 소스코드를 컨테이너Container를 통해 바로 실행하는 구조이기에 <strong>소스코드 (<em>직접 코딩한 소스코드 및 의존성 코드</em>) 를 업로드해둘 스토리지</strong> 가 필요하다. 이 저장 공간을 <code>코드 스토리지code storage</code> 라 한다.</p>
<p>AWS Lambda 서비스에서 제공하는 코드 스토리지는 <strong>75GB</strong> 이고 이 스토리지 용량을 모두 사용하면 소스코드를 업로드할 때 아래와 같은 에러가 발생한다. (※ <a href="https://docs.aws.amazon.com/lambda/latest/operatorguide/code-storage.html" target="_blank" rel="noopener noreferrer">Monitoring Lambda code storage</a>)</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  Code storage limit exceeded. (Service: Lambda, Status Code: 400, ...)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="해결-방법">해결 방법<a href="https://jay2u8809.github.io/dev-posts/2024-06-26-how-to-set-prune-plugin#%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95" class="hash-link" aria-label="해결 방법에 대한 직접 링크" title="해결 방법에 대한 직접 링크">​</a></h2>
<p>sls 로 AWS Lambda 를 Deploy 하던 중 발생한 <code>Code storage limit exceeded</code> 에러를 어떻게 해결해야할까? 우리 팀에서 해결한 방법을 차례로 설명해 본다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-코드-스토리지-용량-확보">1) 코드 스토리지 용량 확보<a href="https://jay2u8809.github.io/dev-posts/2024-06-26-how-to-set-prune-plugin#1-%EC%BD%94%EB%93%9C-%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%EC%9A%A9%EB%9F%89-%ED%99%95%EB%B3%B4" class="hash-link" aria-label="1) 코드 스토리지 용량 확보에 대한 직접 �링크" title="1) 코드 스토리지 용량 확보에 대한 직접 링크">​</a></h3>
<p>코드 스토리지의 용량이 부족하기 때문에 가장 먼저 한 일은 <em>스토리지 용량 확보</em> 이다. 필요없는 람다 함수Lambda Function 를 찾아 삭제하거나 각 람다 함수의 버전Version을 확인해 오래된 버전이 많이 존재한다면 그 버전들을 삭제하는 작업을 진행했다.</p>
<ul>
<li>필요없는(사용하지 않는) 람다 함수 삭제</li>
<li>람다 함수의 오래된 버전 삭제</li>
</ul>
<p>조사 결과 필요없는 람다 함수는 없었기에 <em>"람다 함수의 오래된 버전 삭제"</em> 만 진행했다. 이 작업은 팀의 시니어 엔지니어분께서 AWS CLI 를 이용해 수동으로 하나하나 삭제해가며 진행했다.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ aws lambda delete-function \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --function-name ${LAMBDA_FUNCTION_NAME} \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --qualifier ${LAMBDA_FUNCTION_VERSION}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><a href="https://docs.aws.amazon.com/cli/latest/reference/lambda/delete-function.html" target="_blank" rel="noopener noreferrer">AWS CLI - delete-function</a></li>
</ul>
<p>그리고 이 작업은 한 번이라도 sls 로 deploy 가 가능해질만큼의 용량을 확보할 때까지 계속되었다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-lambda-function-version">※ Lambda Function Version<a href="https://jay2u8809.github.io/dev-posts/2024-06-26-how-to-set-prune-plugin#-lambda-function-version" class="hash-link" aria-label="※ Lambda Function Version에 대한 직접 링크" title="※ Lambda Function Version에 대한 직접 링크">​</a></h3>
<p>AWS Lambda 의 콘솔에서 아무 함수Function를 선택해보면 <code>버전Version</code> 이라는 탭이 있다. 이 <strong>"버전"이 이번 코드 스토리지를 가득 차게 한 원인</strong> 이었다.</p>
<p><em>sls 로 새로운 소스코드를 deploy 할 때, AWS Lambda는 버전이라는 형태로 파일을 생성해 코드 스토리지에 저장</em> 한다. 특별한 설정이 없다면, sls 로 <strong>deploy 할 때마다 매번 새로운 버전의 파일을 생성하고 저장</strong> 한다. (과거의 버전을 그대로 deploy 해서 Rollback 할 수 있는 기능)</p>
<ul>
<li>5MB 크기의 소스코드를 30번 deploy 했다면 5MB * 30회, 총 150MB를 저장하게 된다.</li>
</ul>
<p>지금껏 한 번도 이 버전 파일들을 따로 관리한 적이 없었다. 서비스 초반에 만든 어떤 람다함수는 버전 파일만 300개가 넘었다. 이러한 버전 파일들이 쌓이고 쌓여 75GB 의 코드 스토리지를 가득차게 했다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-serverless-framework-설정">2) Serverless Framework 설정<a href="https://jay2u8809.github.io/dev-posts/2024-06-26-how-to-set-prune-plugin#2-serverless-framework-%EC%84%A4%EC%A0%95" class="hash-link" aria-label="2) Serverless Framework 설정에 대한 직접 링크" title="2) Serverless Framework 설정에 대한 직접 링크">​</a></h3>
<p>sls 로 AWS Lambda 를 deploy 할 수 있을만큼의 최소한의 코드 스토리지의 용량을 확보했다면, sls 의 플러그인Plugin을 이용해 필요없는 버전 파일을 모두 삭제할 수 있도록 했다.</p>
<ul>
<li><a href="https://www.serverless.com/plugins/serverless-prune-plugin" target="_blank" rel="noopener noreferrer">Serverless Prune Plugin</a></li>
</ul>
<p>이 플러그인은 sls 로 deploy 하고 난 뒤, <strong>설정한 갯수의 버전 파일만 남겨두고 모든 버전 파일들을 삭제</strong> 한다. sls 로 deploy 할 때마다 오래된 버전 파일을 삭제하기 때문에 앞으로는 오래된 버전 파일들이 쌓여 코드 스토리지를 차지하지 않도록 할 수 있다. 지속적으로 관리할 수 있기에 가장 좋은 방법이라 생각한다.</p>
<p>이 플러그인의 설정 방법은 <a href="https://jay2u8809.github.io/docs/aws/serverless-framework/how-to-set-prune-plugin">Prune Plugin: AWS Lambda Storage Limit Error</a> 에서 확인 할 수 있다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-deploy">3) Deploy<a href="https://jay2u8809.github.io/dev-posts/2024-06-26-how-to-set-prune-plugin#3-deploy" class="hash-link" aria-label="3) Deploy에 대한 직접 링크" title="3) Deploy에 대한 직접 링크">​</a></h3>
<p>시험 삼아 1개의 Sereverless Framework 설정 파일(YAML)에 Serverless Prune Plugin을 설정하고 sls 로 deploy 했다. 예상대로 오래된 버전의 파일들이 모두 삭제되었다. 나머지 Sereverless Framework 설정 파일(YAML)에도 플러그인을 설정하고 모두 deploy 를 해서 오래된 버전 파일들을 삭제했다. 개발환경(Dev)의 람다함수들의 deploy 횟수가 많았었기에 개발환경만 deploy 해도 상당한 양의 코드 스토리지를 확보할 수 있었다.</p>
<ul>
<li>75GB -&gt; 22GB</li>
</ul>
<p>75GB를 가득채웠던 코드 스토리지 사용 용량이 22GB로 여유로워졌다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://jay2u8809.github.io/dev-posts/2024-06-26-how-to-set-prune-plugin#conclusion" class="hash-link" aria-label="Conclusion에 대한 직접 링크" title="Conclusion에 대한 직접 링크">​</a></h2>
<p>AWS Lambda 를 Deploy 할 때, 버전을 생성하지 않도록 하는 설정이나 방법에 대한 논의도 있었으나 최종적으로는 지금처럼 플러그인을 이용한 방법을 유지하는 것으로 결론이 났다.</p>
<p>이유는 버전을 생성하지 않는 설정이나 방법이 Serverless Framework 를 이용한 방법이 아니라면 따로 문서를 만들어 내용을 관리해야 하기 때문이고 Serverless Framework 를 이용할 수 있는 방법이라도 현재의 플러그인을 이용한 방법과 중복되기 때문이다. 우리 팀은 인프라에 관한 내용은 YAML 파일 자체가 문서로서의 기능을 하기 때문에 최대한 YAML 파일을 통해서만 관리하고 싶어한다.</p>
<p>다소 당황스러운 상황이었지만, 이번 기회를 통해 AWS Lambda 의 버전과 코드 스토리지에 대한 내용을 공부할 수 있어서 좋은 경험이었다.</p>
<br>
<br>
<br>
<br>
<br>
<hr>
<ul>
<li>Refs<!-- -->
<ul>
<li><a href="https://qiita.com/spring_i/items/40cfc99504d26b0834cc" target="_blank" rel="noopener noreferrer">【ServerlessFramework】LambdaがCode storage limit exceededになってしまった時の対処法</a></li>
<li><a href="https://dev.classmethod.jp/articles/lambda-error-storage-limit" target="_blank" rel="noopener noreferrer">Lambdaの関数とレイヤーのストレージがデフォルト上限（75GB）に達してしまった時に対応したこと</a></li>
<li><a href="https://stackoverflow.com/questions/51722526/aws-serverless-code-storage-limit-exceeded" target="_blank" rel="noopener noreferrer">AWS Serverless | Code storage limit exceeded</a></li>
<li><a href="https://docs.aws.amazon.com/cli/latest/reference/lambda/delete-function.html" target="_blank" rel="noopener noreferrer">AWS CLI - Delete Functions</a></li>
<li><a href="https://qiita.com/tcsh/items/dc4592c2f73e64eb9f10" target="_blank" rel="noopener noreferrer">[JAWS-UG CLI] Lambda:#8 バージョンの削除</a></li>
</ul>
</li>
</ul>]]></content:encoded>
            <category>devian-lab</category>
            <category>dev-posts</category>
            <category>aws</category>
            <category>lambda</category>
            <category>serverless framework</category>
            <category>prune</category>
        </item>
        <item>
            <title><![CDATA[Git - Remote Repository URL 을 바꿔보자]]></title>
            <link>https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-change-git-remote-repo-url</link>
            <guid>https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-change-git-remote-repo-url</guid>
            <pubDate>Thu, 20 Jun 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Git 의 Remote Repository URL 을 변경해 본다.]]></description>
            <content:encoded><![CDATA[<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">author</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dev.ian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">createdAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2024-06-20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updatedAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2024-08-18</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<blockquote>
<p>Git 의 Remote Repository URL 을 변경해 본다.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="intro">Intro<a href="https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-change-git-remote-repo-url#intro" class="hash-link" aria-label="Intro에 대한 직접 링크" title="Intro에 대한 직접 링크">​</a></h2>
<p>회사의 Gitlab 플랜을 변경하면서 사내 Gitlab 의 URL 도 함께 변경했다. 회사 자체적으로 운영하던 Git 서버를 다른 대행 업체를 통해 맡기는 형태로 운영 방식을 바꾸게 되면서 URL 로 함께 바뀌게 되었다. Git 의 URL 이 바뀌면서 그동안 사용하던 Git Repository 의 URL 도 모두 바뀌게 된 것이다.</p>
<p>이번 글에서는 Git Remote Repository 의 URL 이 변경되었거나 다른 이유로 변경해야할 때 Local 에서 설정하는 방법에 대해 정리한다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="git-remote-repository-url-확인">Git remote repository URL 확인<a href="https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-change-git-remote-repo-url#git-remote-repository-url-%ED%99%95%EC%9D%B8" class="hash-link" aria-label="Git remote repository URL 확인에 대한 직접 링크" title="Git remote repository URL 확인에 대한 직접 링크">​</a></h2>
<p>가장 먼저 할 작업은 현재 설정되어 있는 상태를 확인하는 것이다. 각 프로젝트의 Git repository 의 Remote URL 이 무엇인지 확인한다.</p>
<ul>
<li><code>git remote -v</code>
<ul>
<li><strong>fetch</strong> 하고 <strong>push</strong> 할때 어떤 url 로 하는지 확인 할 수 있다.</li>
</ul>
</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ git remote -v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  origin  git@gitlab.com:projects/sample1/ABCDE-service.git (fetch)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  origin  git@gitlab.com:projects/sample1/ABCDE-service.git (push)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>origin</code>
<ul>
<li>repository url의 별칭(alias)</li>
<li>reposiory url 이 길기 때문에 사용하는 별칭으로 기본적으로 origin 을 사용한다.</li>
</ul>
</li>
<li><code>git@gitlab.com:projects/sample1/ABCDE-service.git</code>
<ul>
<li>repository 의 ssh url</li>
</ul>
</li>
</ul>
<p>비슷한 명령어로 <code>git config --get remote.origin.url</code> 가 있다. fetch, push 를 나눠서 보여주지 않고 단순히 현재 로컬 git config 에서 설정되어 있는 remote url 을 보여준다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="url-변경">URL 변경<a href="https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-change-git-remote-repo-url#url-%EB%B3%80%EA%B2%BD" class="hash-link" aria-label="URL 변경에 대한 직접 링크" title="URL 변경에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-url">Set-Url<a href="https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-change-git-remote-repo-url#set-url" class="hash-link" aria-label="Set-Url에 대한 직접 링크" title="Set-Url에 대한 직접 링크">​</a></h3>
<p>현재의 Repository remote url 을 확인했다면 새로운 URL 로 변경한다. (<em>sample1 -&gt; sample2</em>)</p>
<p>URL 변경은 <strong>remote set-url</strong> 이라는 명령어를 이용해서 할 수 있다.</p>
<ul>
<li><code>git remote set-url ${REPOSITORY_ALIAS} ${REPOSITORY_NEW_URL}</code>
<ul>
<li>url 을 변경할 repository 의 별칭과 새로운 URL 을 지정한다.</li>
</ul>
</li>
<li>origin 이라는 별칭의 repository 의 URL 을 <code>git@gitlab.com:projects/sample2/ABCDE-service.git</code> 로 지정한 뒤, 확인한다.</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # URL 변경</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $ git remote set-url origin git@gitlab.com:projects/sample2/ABCDE-service.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # URL 확인</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $ git remote -v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  origin  git@gitlab.com:projects/sample2/ABCDE-service.git (fetch)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  origin  git@gitlab.com:projects/sample2/ABCDE-service.git (push)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rename">Rename<a href="https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-change-git-remote-repo-url#rename" class="hash-link" aria-label="Rename에 대한 직접 링크" title="Rename에 대한 직접 링크">​</a></h3>
<p><strong>remote rename</strong> 이라는 명령어로도 remote repository url 을 변경할 수 있다.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-현재-repository-의-별칭을-다른-별칭으로-변경-origin---old_origin">1) 현재 repository 의 별칭을 다른 별칭으로 변경 <em>(origin -&gt; old_origin)</em><a href="https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-change-git-remote-repo-url#1-%ED%98%84%EC%9E%AC-repository-%EC%9D%98-%EB%B3%84%EC%B9%AD%EC%9D%84-%EB%8B%A4%EB%A5%B8-%EB%B3%84%EC%B9%AD%EC%9C%BC%EB%A1%9C-%EB%B3%80%EA%B2%BD-origin---old_origin" class="hash-link" aria-label="1-현재-repository-의-별칭을-다른-별칭으로-변경-origin---old_origin에 대한 직접 링크" title="1-현재-repository-의-별칭을-다른-별칭으로-변경-origin---old_origin에 대한 직접 링크">​</a></h4>
<ul>
<li><code>git remote rename ${CURRENT_ALIAS} ${NEW_ALIAS}</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-기존-별칭으로-새로운-url-의-repositroy-를-추가">2) 기존 별칭으로 새로운 URL 의 repositroy 를 추가<a href="https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-change-git-remote-repo-url#2-%EA%B8%B0%EC%A1%B4-%EB%B3%84%EC%B9%AD%EC%9C%BC%EB%A1%9C-%EC%83%88%EB%A1%9C%EC%9A%B4-url-%EC%9D%98-repositroy-%EB%A5%BC-%EC%B6%94%EA%B0%80" class="hash-link" aria-label="2) 기존 별칭으로 새로운 URL 의 repositroy 를 추가에 대한 직접 링크" title="2) 기존 별칭으로 새로운 URL 의 repositroy 를 추가에 대한 직접 링크">​</a></h4>
<ul>
<li><code>git remote add origin ${REPOSITORY_NEW_URL}</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-repository-확인">3) repository 확인<a href="https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-change-git-remote-repo-url#3-repository-%ED%99%95%EC%9D%B8" class="hash-link" aria-label="3) repository 확인에 대한 직접 링크" title="3) repository 확인에 대한 직접 링크">​</a></h4>
<ul>
<li><code>git remote -v</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-1-에서-변경한-별칭의-repository-old_origin-삭제">4) 1) 에서 변경한 별칭의 repository (old_origin) 삭제<a href="https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-change-git-remote-repo-url#4-1-%EC%97%90%EC%84%9C-%EB%B3%80%EA%B2%BD%ED%95%9C-%EB%B3%84%EC%B9%AD%EC%9D%98-repository-old_origin-%EC%82%AD%EC%A0%9C" class="hash-link" aria-label="4) 1) 에서 변경한 별칭의 repository (old_origin) 삭제에 대한 직접 링크" title="4) 1) 에서 변경한 별칭의 repository (old_origin) 삭제에 대한 직접 링크">​</a></h4>
<ul>
<li><code>git remote rm ${NEW_ALIAS}</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="--example-code">- example code<a href="https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-change-git-remote-repo-url#--example-code" class="hash-link" aria-label="- example code에 대한 직접 링크" title="- example code에 대한 직접 링크">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # 1) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $ git remote rename origin old_origin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # 2) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $ git remote add origin git@gitlab.com:projects/sample2/ABCDE-service.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # 3) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $ git remote -v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  old_origin  git@gitlab.com:projects/sample1/ABCDE-service.git (fetch)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  old_origin  git@gitlab.com:projects/sample1/ABCDE-service.git (push)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  origin  git@gitlab.com:projects/sample1/ABCDE-service.git (fetch)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  origin  git@gitlab.com:projects/sample1/ABCDE-service.git (push)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # 4) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $ git remote rm old_origin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="--error-no-such-remote">- error: No such remote<a href="https://jay2u8809.github.io/dev-posts/2024-08-14-how-to-change-git-remote-repo-url#--error-no-such-remote" class="hash-link" aria-label="- error: No such remote에 대한 직접 링크" title="- error: No such remote에 대한 직접 링크">​</a></h4>
<p><code>rename</code> 명령어로 repository 별칭(alias)을 바꾸는게 아니라 URL 을 변경했을 때, 아래와 같은 에러가 나올 수 있다.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # URL 변경: sample1 -&gt; sample2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $ git remote rename git@gitlab.com:projects/sample1/ABCDE-service.git git@gitlab.com:projects/sample1/ABCDE-service.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fatal: No such remote: 'git@gitlab.com:projects/sample1/ABCDE-service.git' # 이전 url(sample1) 을 찾을 수 없다.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>git remote rename ${OLD_URL} ${NEW_URL}</code> 에서 OLD_URL 이 존재하지 않는 경우, 이러한 에러가 나온다.</p>
<p><em>Git 서버</em> 상에서 기존의 remote repository url 을 새로운 url 로 바꾼 뒤라면, 기존 url 은 이미 사라졌기에 존재하지 않는다. 따라서 이러한 경우에는 <code>remote set-url</code> 명령어를 사용하거나 rename 명령어로 repository 의 별칭을 변경하는 방법으로 해야한다.</p>
<br>
<br>
<br>
<br>
<br>
<hr>
<ul>
<li>Refs<!-- -->
<ul>
<li><a href="https://docs.github.com/ko/get-started/getting-started-with-git/managing-remote-repositories" target="_blank" rel="noopener noreferrer">Official Github Docs-원격 리포지토리 관리</a></li>
<li><a href="https://phoeducation.work/entry/20210827/1630018680" target="_blank" rel="noopener noreferrer">【Git&amp;GitHub】リモートの変更・削除（git remote renameコマンド）</a></li>
<li><a href="https://qiita.com/minoringo/items/917e325892733e0d606e" target="_blank" rel="noopener noreferrer">gitのremote urlを変更する(レポジトリ移行時)</a></li>
<li><a href="https://m.blog.naver.com/rinjyu/222180087428" target="_blank" rel="noopener noreferrer">원격 저장소의 origin은 어떤 것을 의미할까</a></li>
</ul>
</li>
</ul>]]></content:encoded>
            <category>devian-lab</category>
            <category>dev-posts</category>
            <category>git</category>
        </item>
        <item>
            <title><![CDATA[AWS Lambda - Webpack 으로 Upload Size Limit 해결하기]]></title>
            <link>https://jay2u8809.github.io/dev-posts/2024-05-28-how-to-set-webpack</link>
            <guid>https://jay2u8809.github.io/dev-posts/2024-05-28-how-to-set-webpack</guid>
            <pubDate>Tue, 28 May 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Webpack 을 이용한 AWS Lambda 소스코드 용량 줄이기]]></description>
            <content:encoded><![CDATA[<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">author</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dev.ian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">createdAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2024-05-28</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updatedAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2024-08-16</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<blockquote>
<p>"Webpack 을 적용하여 AWS Lambda 에 업로드할 소스코드의 사이즈를 줄여본다"</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="intro">Intro<a href="https://jay2u8809.github.io/dev-posts/2024-05-28-how-to-set-webpack#intro" class="hash-link" aria-label="Intro에 대한 직접 링크" title="Intro에 대한 직접 링크">​</a></h2>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  Unzipped size must be smaller than 262144000 bytes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>최근에 Serverless Framework(이하 <code>sls</code>)로 AWS Lambda 를 Deploy 하면서 나온 에러 메세지다. AWS Lambda 에 업로드할 소스코드의 용량이 (압축하지 않았을 경우에) 약 250MB 보다 적어야 한다는 것이다.</p>
<p>현재 우리 팀의 서비스는 AWS Lambda 와 ECS Fargate 에 Nest.js 프로젝트를 올려 운영하고 있다. ECS Fargate 는 특별히 소스코드 용량 제한이 없지만 AWS Lambda 는 여러가지 용량 제한이 있다.</p>
<ul>
<li><a href="https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-limits.html#function-configuration-deployment-and-execution" target="_blank" rel="noopener noreferrer">Lambda quotas - Function configuration, deployment, and execution</a>
<ul>
<li>AWS Lambda 에 직접 올릴수 없는 용량이 큰 파일을 S3에 업로드하게 되는데 <strong>50MB(압축했을 경우)</strong> 또는 <strong>250MB(압축하지 않았을 경우)</strong> 이하여야한다.</li>
</ul>
</li>
</ul>
<p>이번 포스트에서는 Webpack 을 이용해 Nest.js 프로젝트의 소스코드 사이즈를 줄이는 방법에 대해 정리해본다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="소스코드의-용량이-늘어난-이유">소스코드의 용량이 늘어난 이유<a href="https://jay2u8809.github.io/dev-posts/2024-05-28-how-to-set-webpack#%EC%86%8C%EC%8A%A4%EC%BD%94%EB%93%9C%EC%9D%98-%EC%9A%A9%EB%9F%89%EC%9D%B4-%EB%8A%98%EC%96%B4%EB%82%9C-%EC%9D%B4%EC%9C%A0" class="hash-link" aria-label="소스코드의 용량이 늘어난 이유에 대한 직접 링크" title="소스코드의 용량이 늘어난 이유에 대한 직접 링크">​</a></h2>
<p>서비스가 성장하면서 추가한 기능만큼 소스코드도 늘어났지만, 가장 큰 원인은 업로드할 파일에 필요없는 내용이 많은 것이었다.</p>
<p>우리 팀의 프로젝트 구조를 간략히 설명하자면 1개의 Nest.js 프로젝트 내에서 여러가지 마이크로 서비스들을 각각 deploy 하는 방식으로 MSA를 구현하고 있다. 각 마이크로 서비스마다 각각의 Nest.js Application 과 Module 을 통해 필요한 기능들만 import 해서 사용하고 있지만, 의존성Dependencies(<code>node_modules</code>)은 공통이다.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">functions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">exampleLambdaIndex</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">handler</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">PATH</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">.handler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">package</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">patterns</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'!**'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> dist/</span><span class="token important">**</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># js transfer result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> node_modules/</span><span class="token important">**</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># all of dependencies</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">individually</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>가령 A, B, C 라는 의존성이 있을 때, "회원 서비스"에서는 A, C 만 사용하더라도 회원 서비스를 deploy 할 때에는 node_modules 디렉토리에 있는 모든 의존성(A, B, C)을 업로드하는 것이다. 이렇다보니 서비스 초창기에는 별 문제 없었지만, 서비스가 성장하고 소스코드와 의존성이 늘어나면서 이제 더이상은 업로드할 수 없는 상황까지 오게 되었다.</p>
<p>Lambda Layer를 사용해 공통 의존성들을 따로 관리하고 있음에도 이러한 문제가 발생해 막막했다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="webpack-을-사용하는-이유">Webpack 을 사용하는 이유<a href="https://jay2u8809.github.io/dev-posts/2024-05-28-how-to-set-webpack#webpack-%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0" class="hash-link" aria-label="Webpack 을 사용하는 이유에 대한 직접 링크" title="Webpack 을 사용하는 이유에 대한 직접 링크">​</a></h2>
<p>웹팩Webpack은 필요없는(사용하지 않는) 코드를 없앨수 있다. 각 마이크로 서비스에 실제 사용되는 소스코드와 의존성만을 이용해 결과물을 만들어 낸다. 그렇기 때문에 필요없는 코드들을 없앨 수 있고 실제 기능에 필요한 코드만을 업로드할 수 있도록 한다.</p>
<p>위에서 예를 든 "회원 서비스"에서 사용하지 않는 B 의존성을 제거할 수 있다. 필요없는 의존성을 제거할 수 있기에 소스코드의 용량을 획기적으로 줄일수 있을 것이라 생각했다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nestjs-webpack">Nest.js Webpack<a href="https://jay2u8809.github.io/dev-posts/2024-05-28-how-to-set-webpack#nestjs-webpack" class="hash-link" aria-label="Nest.js Webpack에 대한 직접 링크" title="Nest.js Webpack에 대한 직접 링크">​</a></h2>
<p>다양한 웹팩 툴들이 있었지만 Nest.js 의 웹팩 옵션을 사용해 빌드하는 방식을 선택했다. 웹팩을 적용할 때 가장 중요한 조건 중 하나가 Nest.js 와의 호환성이었는데, Nest.js 에서 웹팩을 지원하고 있다면 그 방법이 최선이라고 생각했다.</p>
<ul>
<li><a href="https://docs.nestjs.com/cli/monorepo#webpack-options" target="_blank" rel="noopener noreferrer">Nest.js-Webpack Options</a></li>
<li><a href="https://webpack.js.org/configuration/" target="_blank" rel="noopener noreferrer">Webpack Configuration</a></li>
</ul>
<p><code>package.json</code> 파일에 웹팩을 적용해 빌드하도록 설정하고, 웹팩 설정을 위해 <code>webpack.config.js</code> 파일을 만들었다. 좀 더 자세한 내용은 <a href="https://jay2u8809.github.io/docs/aws/serverless-framework/how-to-set-webpack-multiple-entry">Nest.js Webpack 적용 방법</a>에서 확인할 수 있다.</p>
<ul>
<li>
<p>package.json</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  "scripts": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "build": "nest build --webpack --webpackPath ${PATH}/webpack.config.js"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>webpack.config.js</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">options</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> webpack</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">entry</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">./src/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation constant" style="color:#36acaa">NESTJS_APP_PATH</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">externals</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">output</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">output</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">clean</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">libraryTarget</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'commonjs2'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">plugins</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">plugins</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">webpack</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">optimize</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">LimitChunkCountPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">maxChunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mainjs">main.js<a href="https://jay2u8809.github.io/dev-posts/2024-05-28-how-to-set-webpack#mainjs" class="hash-link" aria-label="main.js에 대한 직접 링크" title="main.js에 대한 직접 링크">​</a></h3>
<p>웹팩을 적용해 Nest.js 를 빌드하면 <code>dist</code> 디렉토리에 <strong>main.js</strong> 파일이 생성된다. 이 파일은 <em>웹팩이 적용된 빌드 결과 파일</em> 이다. 파일을 확인해보면 의존성을 포함한 관련 소스코드가 1개의 파일로 만들어져 있다.</p>
<ul>
<li>main.js 라는 이름은 변경할 수 있으며 기본값이 main.js 이다.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="serverless-framework-yaml">Serverless Framework YAML<a href="https://jay2u8809.github.io/dev-posts/2024-05-28-how-to-set-webpack#serverless-framework-yaml" class="hash-link" aria-label="Serverless Framework YAML에 대한 직접 링크" title="Serverless Framework YAML에 대한 직접 링크">​</a></h2>
<p>Nest.js 프로젝트에 웹팩을 적용했다면 웹팩이 적용된 파일을 deploy 할 수있도록 해야한다. package.json 와 sls YAML 파일을 아래와 같이 수정한다.</p>
<ul>
<li>
<p>package.json</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  "scripts": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "deploy:example": "nest build --webpack --webpackPath ${PATH}/webpack.config.js &amp;&amp; sls deploy -c ./${YAML_PATH}/serverless.yaml"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>YAML</p>
<ul>
<li>main.js 파일을 그대로 업로드 하는 방식이기에 더 이상 Lambda Layer 를 사용하지 않는다.</li>
</ul>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">functions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">exampleLambdaIndex</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">handler</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dist/main.handler  </span><span class="token comment" style="color:#999988;font-style:italic"># main.js 의 handler 함수</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">package</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">patterns</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'!**'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> dist/main.js </span><span class="token comment" style="color:#999988;font-style:italic"># webpack result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">individually</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>웹팩 적용을 끝내고 deploy 해보면 문제 없이 소스코드가 업로드되는 것을 확인할 수 있다.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ npm run deploy:example</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://jay2u8809.github.io/dev-posts/2024-05-28-how-to-set-webpack#conclusion" class="hash-link" aria-label="Conclusion에 대한 직접 링크" title="Conclusion에 대한 직접 링크">​</a></h2>
<ul>
<li>250MB -&gt; 15MB</li>
</ul>
<p>웹팩을 적용함으로서 deploy 할 때 업로드할 소스코드의 양을 대폭 줄일 수 있었다. 기존의 방식은 프로젝트의 소스코드(<code>dist</code>)와 의존성(<code>node_module</code>)을 모두 업로드하는 방식이었기에 250MB가 넘어가는 용량이었지만 웹팩을 통해 약 15MB 정도의 main.js 만 업로드하는 방식으로 바꾸었다. 이를 통해 S3 의 저장용량도 줄일 수 있었다. (AWS Lambda 의 소스코드는 일정 용량 이상인 경우 S3 에 업로드 된다.)</p>
<ul>
<li>Build 필수</li>
</ul>
<p>sls 는 deploy 할 때, <code>patterns</code> 에 지정한 파일들을 그대로 패키징해 업로드한다. 빌드여부는 중요하지 않다. 그래서 가끔 코드를 수정한 뒤, build 를 하지 않고 deploy 했던 경우가 있었다. 그러면 수정 내용이 전혀 반영되지 않는다. webpack 처리를 위해 반드시 build 를 해야하기에 build 가 되지 않은 코드가 deploy 하는 일이 없어졌다.</p>
<ul>
<li>Build 시간 증가</li>
</ul>
<p>아쉬운 점은 이를 통해 build 시간이 꽤나 길어졌다는 것이다. webpack 을 적용하는 시간이 걸리면서 약 30초 이상, 경우에 따라서는 약 3분 이상 build 시간이 늘어났다. build 시간은 단축 할 수 있는 다른 툴들도 알아봐야할 필요가 생겼다.</p>]]></content:encoded>
            <category>devian-lab</category>
            <category>dev-posts</category>
            <category>aws</category>
            <category>lambda</category>
            <category>serverless framework</category>
            <category>webpack</category>
        </item>
        <item>
            <title><![CDATA[Typescript - 순수함수란?]]></title>
            <link>https://jay2u8809.github.io/dev-posts/2023-01-21-what-is-the-pure-function</link>
            <guid>https://jay2u8809.github.io/dev-posts/2023-01-21-what-is-the-pure-function</guid>
            <pubDate>Sat, 21 Jan 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[js 의 순수 함수에 대해 알아본다.]]></description>
            <content:encoded><![CDATA[<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">author</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dev.ian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">createdAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2023-01-21</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updatedAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2023-01-23</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<blockquote>
<p>JS 의 순수 함수에 대해 알아본다.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="순수-함수pure-function란">순수 함수(Pure Function)란?<a href="https://jay2u8809.github.io/dev-posts/2023-01-21-what-is-the-pure-function#%EC%88%9C%EC%88%98-%ED%95%A8%EC%88%98pure-function%EB%9E%80" class="hash-link" aria-label="순수 함수(Pure Function)란?에 대한 직접 링크" title="순수 함수(Pure Function)란?에 대한 직접 링크">​</a></h2>
<blockquote>
<p>💡 부수 효과 (Side-Effect) 가 없는 함수를 의미</p>
</blockquote>
<ul>
<li>부수 효과란 “<em>함수가 가진 목적 이외에 다른 효과가 나타나는 것</em>” 을 의미한다. 그리고 이러한 부수 효과가 있는 함수는 “<strong>불순 함수(Impure function)</strong>” 이라 한다.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="순수-함수의-조건은">순수 함수의 조건은?<a href="https://jay2u8809.github.io/dev-posts/2023-01-21-what-is-the-pure-function#%EC%88%9C%EC%88%98-%ED%95%A8%EC%88%98%EC%9D%98-%EC%A1%B0%EA%B1%B4%EC%9D%80" class="hash-link" aria-label="순수 함수의 조건은?에 대한 직접 링크" title="순수 함수의 조건은?에 대한 직접 링크">​</a></h3>
<ul>
<li>
<p>순수 함수는 아래의 조건을 만족해야 한다.</p>
<ul>
<li>함수에 입출력 관련 코드가 없어야 한다.</li>
<li>함수에서 매개 변수 값을 변경시키지 않아야 한다.<!-- -->
<ul>
<li>매개 변수는 const 나 readonly 형태로만 사용</li>
</ul>
</li>
<li>함수의 결과를 바로 return 한다.</li>
<li>함수 외부의 변수(전역 변수나 정적 변수 등)를 사용하지 않아야 한다.</li>
<li>함수가 예외(Exception)를 발생시키지 않는다.</li>
<li>함수가 콜백(Callback) 함수로 구현되었거나, 콜백 함수를 사용한 코드가 없어야 한다.</li>
<li>함수에 Promise 와 같은 비동기 방식으로 동작하는 코드가 없어야 한다.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="순수-함수와-불순-함수의-예">순수 함수와 불순 함수의 예<a href="https://jay2u8809.github.io/dev-posts/2023-01-21-what-is-the-pure-function#%EC%88%9C%EC%88%98-%ED%95%A8%EC%88%98%EC%99%80-%EB%B6%88%EC%88%9C-%ED%95%A8%EC%88%98%EC%9D%98-%EC%98%88" class="hash-link" aria-label="순수 함수와 불순 함수의 예에 대한 직접 링크" title="순수 함수와 불순 함수의 예에 대한 직접 링크">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="--순수-함수">- 순수 함수<a href="https://jay2u8809.github.io/dev-posts/2023-01-21-what-is-the-pure-function#--%EC%88%9C%EC%88%98-%ED%95%A8%EC%88%98" class="hash-link" aria-label="- 순수 함수에 대한 직접 링크" title="- 순수 함수에 대한 직접 링크">​</a></h4>
<ul>
<li>
<p>Code①</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">num1</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> num2</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> nubmer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> num1 </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> num2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="--불순-함수-1">- 불순 함수 1<a href="https://jay2u8809.github.io/dev-posts/2023-01-21-what-is-the-pure-function#--%EB%B6%88%EC%88%9C-%ED%95%A8%EC%88%98-1" class="hash-link" aria-label="- 불순 함수 1에 대한 직접 링크" title="- 불순 함수 1에 대한 직접 링크">​</a></h4>
<ul>
<li>
<p>Code②: 매개 변수 값을 변경한다. (push 함수는 새로운 배열을 만들지 않고 원래의 배열을 수정)</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addArray</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arr</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    arr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="--불순-함수-2">- 불순 함수 2<a href="https://jay2u8809.github.io/dev-posts/2023-01-21-what-is-the-pure-function#--%EB%B6%88%EC%88%9C-%ED%95%A8%EC%88%98-2" class="hash-link" aria-label="- 불순 함수 2에 대한 직접 링크" title="- 불순 함수 2에 대한 직접 링크">​</a></h4>
<ul>
<li>
<p>Code③: 함수 외부의 변수를 사용한다.</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">num</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> num </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="readonly-키워드">Readonly 키워드<a href="https://jay2u8809.github.io/dev-posts/2023-01-21-what-is-the-pure-function#readonly-%ED%82%A4%EC%9B%8C%EB%93%9C" class="hash-link" aria-label="Readonly 키워드에 대한 직접 링크" title="Readonly 키워드에 대한 직접 링크">​</a></h3>
<p>함수의 매개 변수에 readonly 키워드를 사용하면 함수 내부에서 매개 변수의 값을 수정하지 못하도록 막을 수 있다.</p>
<p>위의 <em>Code②</em> 의 매개 변수에 readonly 키워드를 사용해보자. push 메소드를 사용하지 못하도록 에러가 나타나는 것을 확인 할 수 있다.</p>
<ul>
<li>
<p>Code④</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addArray</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arr</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  arr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// error 가 나타난다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>인터페이스나 클래스 내의 변수들, 함수의 매개 변수 등은 let 이나 const 키워드 없이 선언하지만 이 때, readonly 키워드를 사용하여 const 와 같은 효과를 낼 수 있다.</p>
<br>
<br>
<br>
<br>
<br>
<hr>
<ul>
<li>Refs</li>
</ul>]]></content:encoded>
            <category>devian-lab</category>
            <category>dev-posts</category>
            <category>JavaScript</category>
            <category>TypeScript</category>
            <category>pure function</category>
        </item>
        <item>
            <title><![CDATA[Nest.js - [Error] number 유효성 체크]]></title>
            <link>https://jay2u8809.github.io/dev-posts/2022-09-22-error-nestjs-validating-numeric-url-param</link>
            <guid>https://jay2u8809.github.io/dev-posts/2022-09-22-error-nestjs-validating-numeric-url-param</guid>
            <pubDate>Thu, 22 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Nest.js 에서 request 을 받을 때 발생한 validate 에러를 해결해 본다.]]></description>
            <content:encoded><![CDATA[<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">author</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dev.ian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">createdAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2022-09-22</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updatedAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2022-09-22</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<blockquote>
<p>Nest.js 에서 request 을 받을 때 발생한 validate 에러를 해결해 본다.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="intro">Intro<a href="https://jay2u8809.github.io/dev-posts/2022-09-22-error-nestjs-validating-numeric-url-param#intro" class="hash-link" aria-label="Intro에 대한 직접 링크" title="Intro에 대한 직접 링크">​</a></h2>
<p>Client 에서 URL에 데이터를 넣는 Request (QueryString 또는 Path Variable) 를 보낼 때, 문자열이 아닌 데이터(숫자 등)를 보내면 발생하는 에러를 해결해 본다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="source-code">Source Code<a href="https://jay2u8809.github.io/dev-posts/2022-09-22-error-nestjs-validating-numeric-url-param#source-code" class="hash-link" aria-label="Source Code에 대한 직접 링크" title="Source Code에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="controller">Controller<a href="https://jay2u8809.github.io/dev-posts/2022-09-22-error-nestjs-validating-numeric-url-param#controller" class="hash-link" aria-label="Controller에 대한 직접 링크" title="Controller에 대한 직접 링크">​</a></h3>
<ul>
<li>
<p>아래의 코드와 같이 주문 상품의 수량을 변경하는 EndPoint 가 있다고 가정한다.</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">Patch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'order/prod/count/:id/:count'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">ApiResponse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    status</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> HttpStatus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OK</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> OrderProdUpdateResponseDto</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'udpdate ord prod'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">HttpCode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">HttpStatus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">UseGuards</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ParamGuard</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">updateOrdProd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">Param</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> param</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> OrderProdUpdateDto</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">OrderProdUpdateResponseDto</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">TAG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'patch-ord-prod-req'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> param</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> OrderProdUpdateResponseDto </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">orderService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">updateOrdProd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      param</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      param</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">TAG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'patch-ord-prod-res'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dto">DTO<a href="https://jay2u8809.github.io/dev-posts/2022-09-22-error-nestjs-validating-numeric-url-param#dto" class="hash-link" aria-label="DTO에 대한 직접 링크" title="DTO에 대한 직접 링크">​</a></h3>
<ul>
<li>
<p>위의 엔드포인트의 Path Variable (id, count) 에 해당하는 데이터를 정의한다.</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ApiProperty</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@nestjs/swagger'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">IsNotEmpty</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> IsNumber</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> IsString</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'class-validator'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Type</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'class-transformer'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">OrderProdUpdateDto</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">ApiProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">IsNotEmpty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">IsString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">ApiProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'주문 상품 수량'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">IsNotEmpty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">IsNumber</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="error">Error<a href="https://jay2u8809.github.io/dev-posts/2022-09-22-error-nestjs-validating-numeric-url-param#error" class="hash-link" aria-label="Error에 대한 직접 링크" title="Error에 대한 직접 링크">​</a></h2>
<p>위의 DTO 코드를 보면 <code>count</code> 는 숫자형 변수이고 데코레이터로도 숫자형 데이터만을 받을 수 있도록 유효성 검사(<code>@IsNumber</code>)를 하고 있다.</p>
<p>그럼에도 불구하고 API 테스트 툴(Postman, Insomnia 등) 나 Swagger를 사용해 Request 를 보내면 아래와 같이 숫자형 데이터가 아니라는 에러가 발생한다.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  count must be a number conforming to the specified constraints</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="원인-분석">원인 분석<a href="https://jay2u8809.github.io/dev-posts/2022-09-22-error-nestjs-validating-numeric-url-param#%EC%9B%90%EC%9D%B8-%EB%B6%84%EC%84%9D" class="hash-link" aria-label="원인 분석에 대한 직접 링크" title="원인 분석에 대한 직접 링크">​</a></h2>
<blockquote>
<p>URL의 데이터를 통해 Request 를 받을 때, 숫자형 데이터가 문자열 타입 (URL이 문자열이므로) 그대로 DTO와 Mapping 되는 것</p>
</blockquote>
<p>데이터를 RequestBody 와 같이 JSON 형태가 아니라 URL의 <strong>문자열로 보냈기 때문</strong>에,  URL 경로에서 <code>:count</code>에 해당하는 데이터는 아래와 같이 <strong>문자열</strong> 로 DTO 의 <code>count</code> 필드와 맵핑된다.</p>
<ul>
<li>
<p>Request</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  https://www.ooooo.com/api/v1/order/prod/count/ABCD321321-12/3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>count 는 숫자 3 이 아닌 문자열 '3' 이다.</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ABCD321321-12'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'3'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>그렇기 때문에 URL 경로의 데이터들을 DTO 객체와 맵핑하는 과정에서 <em>문자열 -&gt; 숫자</em> 로 변경하는 처리가 필요하다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="해결">해결<a href="https://jay2u8809.github.io/dev-posts/2022-09-22-error-nestjs-validating-numeric-url-param#%ED%95%B4%EA%B2%B0" class="hash-link" aria-label="해결에 대한 직접 링크" title="해결에 대한 직접 링크">​</a></h2>
<blockquote>
<p><strong>@Type(() =&gt; 변경하고자 하는 타입)</strong> 데코레이터</p>
</blockquote>
<ul>
<li>
<p><code>@Type</code> 데코레이터를 사용하면 URL 경로의 데이터들을 DTO 객체와 맵핑하는 과정에서 <em>문자열 -&gt; 숫자</em> 로 변경하는 처리를 할 수 있다.</p>
</li>
<li>
<p><code>@Type(() =&gt; Number)</code> 를 이용해 URL 경로의 데이터와 DTO의 필드가 <strong>맵핑 되기 전</strong> 에 숫자로 타입을 변경한다.</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">Type</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> Number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">IsNumber</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>데코레이터는 위에서 아래로 적용된다. 따라서 <code>@Type</code> 데코레이터가 <code>@IsNumber</code> 데코레이터 보다 위에 있어야 한다. 반대의 경우, 숫자 타입으로 변경하지 않은 채 <code>@IsNumber</code> 가 적용되어 똑같은 에러가 발생한다.</p>
</li>
</ul>
<p>지금까지 주로 JSON을 사용하여 데이터를 서버로 넘겼기 때문에 이와 같은 에러를 본 적이 없었다. 이번 경우도 URL 경로가 아닌 JSON 형태로 Request 를 보내면 문제없이 처리할 수 있었다.</p>
<p>하지만  <em>QueryString</em> 이나 <em>Path Variable</em> 과 같이 URL 에 직접 데이터를 보내는 경우에는 데이터를 모두 문자열 타입으로 처리하기 때문에 DTO 매핑 단계에서 타입 변경 처리가 반드시 필요하다는 사실을 알 수 있었다.</p>
<br>
<br>
<br>
<br>
<br>
<hr>
<ul>
<li>Refs<!-- -->
<ul>
<li><a href="https://dev.to/avantar/validating-numeric-query-parameters-in-nestjs-gk9" target="_blank" rel="noopener noreferrer">Validating numeric query parameters in NestJS</a></li>
<li><a href="https://sleepy-it.tistory.com/41" target="_blank" rel="noopener noreferrer">[NestJS] must be a number conforming to the specified constraints - body dto 타입 에러 해결</a></li>
</ul>
</li>
</ul>]]></content:encoded>
            <category>devian-lab</category>
            <category>dev-posts</category>
            <category>nest.js</category>
            <category>trouble shooting</category>
            <category>validation</category>
        </item>
        <item>
            <title><![CDATA[Typescript - filter 함수의 사용법]]></title>
            <link>https://jay2u8809.github.io/dev-posts/2022-09-07-how-to-use-filter-func</link>
            <guid>https://jay2u8809.github.io/dev-posts/2022-09-07-how-to-use-filter-func</guid>
            <pubDate>Wed, 07 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[자바스크립트의 Filter 함수에 대해 알아본다.]]></description>
            <content:encoded><![CDATA[<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">author</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dev.ian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">createdAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2022-09-07</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updatedAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2023-01-01</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<blockquote>
<p>"자바스크립트에서 자주 사용하는 함수 중 filter 함수의 사용법을 정리해 본다."</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="intro">Intro<a href="https://jay2u8809.github.io/dev-posts/2022-09-07-how-to-use-filter-func#intro" class="hash-link" aria-label="Intro에 대한 직접 링크" title="Intro에 대한 직접 링크">​</a></h2>
<p>어느 프로그래밍 언어든 기본 함수나 문법의 정확한 사용법을 알고 사용하는 것이 중요하다. 자바를 사용하던 회사에서 타입스크립트를 사용하는 회사로 이직한 뒤, 개발은 하고 있지만 자주 사용하는 함수나 프로그래밍 문법에 대한 정확한 이해와 사용법을 모른채 블로그의 사용 예나 다른 동료의 코드를 보고 비슷한게 만들었던 적이 많았다.</p>
<p>그로 인해, 자주 사용하는 함수나 문법임에도 다른 개발자의 코드를 확인해보고 개발하는 경우가 많아졌다. 처리 방식이나 결과가 예상한 것처럼 되는지 정확하게 알지를 못하니 “혹시 이런 경우에는? 또 다른 경우에는?” 과 같은 의문이 계속 생겨나고 이를 확인하기 위해, 테스트하는 시간이 늘어났다. 그 결과 시간이 지날수록 오히려 개발시간이 더 늘어났다.</p>
<p>평소 find 와 map, filter 등의 기본 함수를 자주 사용하고는 있었지만, 정확히 어떤 처리를 하고 어떤 용도로 사용하는지를 잘 모른채 사용해왔다. 이번 기회에 조금 깊게 공부하고 정리해두려 한다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="filter-함수">Filter 함수<a href="https://jay2u8809.github.io/dev-posts/2022-09-07-how-to-use-filter-func#filter-%ED%95%A8%EC%88%98" class="hash-link" aria-label="Filter 함수에 대한 직접 링크" title="Filter 함수에 대한 직접 링크">​</a></h2>
<ul>
<li><strong>조건에 맞는 데이터들만 걸러내어 <em>새로운 List</em> 로 만든다.</strong>
<ul>
<li>① 새로운 리스트 생성(빈 리스트, [])</li>
<li>② 새로운 리스트에 추가할 조건이 True 인 경우에만 리스트에 추가</li>
<li>③ 생성된 리스트 반환</li>
</ul>
</li>
<li>조건에 맞는 값이 없다면 빈 List 를 반환한다.</li>
<li>조건 검색을 위해 <strong>배열의 모든 값을 확인</strong> 한다. (find 함수와의 차이점)</li>
</ul>
<p>아래의 코드(<em>Code①</em>)는 문자열의 길이가 6 미만인 데이터만을 필터링하여 새로운 리스트를 만들어내는 코드이다.</p>
<p>출력된 로그를 확인해 보면, 원래의 데이터인 list 변수는 변함없이 그대로이다. 조건에 맞는 데이터들로 새롭게 리스트를 만들었다.</p>
<ul>
<li>Code①<!-- -->
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> list</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'apple'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'banana'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'kiwi'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 문자열의 길이가 6 미만인 데이터만 골라 새로운 리스트를 만든다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> filtered</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> list</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">item</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'original'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> list</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// [LOG]: "original",  ["apple", "banana", "kiwi"] </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'filtered'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> filtered</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// [LOG]: "filtered",  ["apple", "kiwi"]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>filter 함수는 조건에 맞는(콜백 함수의 결과값, True or False) “<strong>원래의 데이터를 새로운 리스트에 추가</strong>” 하는 것이기 때문에 <strong>기존 데이터 자체를 변경 할 수는 없다</strong>.</p>
<p>예를 들어 [apple, banana, kiwi] 라는 기존의 데이터를 이용해 새로운 리스트를 만들 때는 문자열의 순서를 뒤집거나 ([’elppa’, ‘ananab’, ‘iwik’]) 첫 번째 문자만 대문자로 만들거나 ([’Apple’, ’Banana’, ’Kiwi’])  등의 기존의 데이터에 없던 데이터가 새로운 리스트에 생성되지는 않는다는 것이다.(이러한 처리는 map 함수를 이용한다.)</p>
<p>[’apple’, ‘kiwi’] 나 [](길이가 0인 리스트), [’banana’] 등의 기존의 데이터만이 새로운 리스트에 추가될 수 있다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="--코드-블럭-을-사용할-때는-return-값이-필요하다">- 코드 블럭(<code>{}</code>) 을 사용할 때는 Return 값이 필요하다<a href="https://jay2u8809.github.io/dev-posts/2022-09-07-how-to-use-filter-func#--%EC%BD%94%EB%93%9C-%EB%B8%94%EB%9F%AD-%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%A0-%EB%95%8C%EB%8A%94-return-%EA%B0%92%EC%9D%B4-%ED%95%84%EC%9A%94%ED%95%98%EB%8B%A4" class="hash-link" aria-label="--코드-블럭-을-사용할-때는-return-값이-필요하다에 대한 직접 링크" title="--코드-블럭-을-사용할-때는-return-값이-필요하다에 대한 직접 링크">​</a></h3>
<p>아래의 코드(<em>Code②</em>)는 <em>Code①</em> 에 없던 코드블럭(<code>{}</code>) 이 있다. 그리고 예상과 달리 빈 리스트를 만들어낸다.</p>
<ul>
<li>
<p>Code②</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> list</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'apple'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'banana'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'kiwi'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> filtered</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> list</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">item</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'filtered'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> filtered</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// [LOG]: "filtered",  []</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>코드블럭은 보통 복수의 코드 라인을 처리 할 때 사용한다.</p>
<p><code>(item: string) =&gt; item.length &lt; 6</code> 는 filter 함수의 콜백Callback 함수이므로 반드시 결과 즉, 반환값(Return) 이 필요하다. (list 변수의 길이만큼의 콜백 함수가 실행되는 것)</p>
<p>filter 함수가 콜백함수의 <em>True/False</em> 의 결과값을 받아 리스트를 만들기 때문에, <em>Code②</em> 처럼 아무런 결과를 반환하지 않고 끝내버리면 콜백 함수의 결과는 undefined 가 된다. 따라서 filter 함수는 False 로 판단하여 리스트를에 데이터를 추가하지 않는다.</p>
<p>따라서 아래의 <em>Code③</em> 처럼 바꾸면 <em>Code①</em> 와 같은 결과가 나온다.</p>
<ul>
<li>
<p>Code③</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> list</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'apple'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'banana'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'kiwi'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> filtered</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> list</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">item</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'filtered'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> filtered</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// [LOG]: "filtered",  ["apple", "kiwi"]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="--빈-리스트에-filter-함수를-사용한다면">- 빈 리스트(<code>[]</code>)에 filter 함수를 사용한다면?<a href="https://jay2u8809.github.io/dev-posts/2022-09-07-how-to-use-filter-func#--%EB%B9%88-%EB%A6%AC%EC%8A%A4%ED%8A%B8%EC%97%90-filter-%ED%95%A8%EC%88%98%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C%EB%8B%A4%EB%A9%B4" class="hash-link" aria-label="--빈-리스트에-filter-함수를-사용한다면에 대한 직접 링크" title="--빈-리스트에-filter-함수를-사용한다면에 대한 직접 링크">​</a></h3>
<p>그렇다면 원래의 데이터가 빈 리스트(<code>[]</code>, 길이가 0인 리스트) 인 경우에 filter 함수를 사용한다면 어떻게 될까?</p>
<p>당연하게도 콜백함수가 True/False 를 체크할 데이터가 없기 때문에 filter 함수는 그대로 <strong>빈 리스트(<code>[]</code>)</strong> 를 만들어 낸다.</p>
<p>아래의 <em>Code④</em> 를 보면 데이터가 없기 때문에 콜백함수가 실행조차 되지 않았다.(<code>console.log('item', item)</code> 의 출력 결과가 없다.)</p>
<p>원래 데이터의 갯수만큼 콜백함수가 실행되는데 데이터의 갯수가 0 이기 때문에 콜백함수의 실행도 0 번이 된다.</p>
<ul>
<li>
<p>Code④</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> list</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> filtered</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> list</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">item</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'item'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'filtered'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> filtered</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// [LOG]: "filtered",  []</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<br>
<br>
<br>
<br>
<br>
<hr>
<ul>
<li>Refs<!-- -->
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" target="_blank" rel="noopener noreferrer">MDN - Array.prototype.filter()</a></li>
</ul>
</li>
</ul>]]></content:encoded>
            <category>devian-lab</category>
            <category>dev-posts</category>
            <category>JavaScript</category>
            <category>TypeScript</category>
            <category>filter 함수</category>
        </item>
        <item>
            <title><![CDATA[Git - [Error] adding files failed]]></title>
            <link>https://jay2u8809.github.io/dev-posts/2022-05-28-error-adding-files-failed</link>
            <guid>https://jay2u8809.github.io/dev-posts/2022-05-28-error-adding-files-failed</guid>
            <pubDate>Sat, 28 May 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Git 의 adding files failed 에러를 알아보고 해결해 본다.]]></description>
            <content:encoded><![CDATA[<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">author</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dev.ian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">createdAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2022-05-28</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updatedAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2022-05-28</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<blockquote>
<p>Git 의 adding files failed 에러를 알아보고 해결해 본다.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="intro">Intro<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-adding-files-failed#intro" class="hash-link" aria-label="Intro에 대한 직접 링크" title="Intro에 대한 직접 링크">​</a></h2>
<p>여러 개의 프로젝트를 하나의 Git Repository 에서 관리하고 있었다. 새롭게 Nest.js 프로젝트를 명령어(nest cli)를 통해 생성했고 생성한 프로젝트를 Git 에 Commit 하려고 하니 add 가 되지 않았다.</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  GitRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── A Project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── B Project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── C Project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── D Project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └── E Project (new project)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="error">Error<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-adding-files-failed#error" class="hash-link" aria-label="Error에 대한 직접 링크" title="Error에 대한 직접 링크">​</a></h2>
<ul>
<li>
<p>Git Error 의 메시지는 아래와 같았다.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  error: '${PROJECT_NAME}/' does not have a commit checked out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fatal: adding files failed</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="원인-분석">원인 분석<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-adding-files-failed#%EC%9B%90%EC%9D%B8-%EB%B6%84%EC%84%9D" class="hash-link" aria-label="원인 분석에 대한 직접 링크" title="원인 분석에 대한 직접 링크">​</a></h2>
<p>에러 메시지를 바탕으로 구글링 해본 결과 아래의 경우가 원인인 듯 했다.</p>
<blockquote>
<p><code>.git</code> 디렉토리가 중복으로 존재하는 경우</p>
</blockquote>
<p>한 개의 Git Repository 에는 하나의 <code>.git</code> 디렉토리만 있어야한다. 그런데 이번에 새롭게 추가한 Nest.js 프로젝트는 명령어(nest cli)로 생성할 경우 자동으로 Nest.js 프로젝트 내부에 <code>.git</code> 디렉토리를 생성한다. 이것이 에러의 원인이었다.</p>
<p>Git Repository 의 구조를 정리하면 아래와 같다.</p>
<ul>
<li>
<p>Project Structure</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  GitRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── A Project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── B Project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── C Project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── D Project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── E Project (new project)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │     ├── .git  # 자동으로 생성된 디렉토리</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │     └── .gitignore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ├── .git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └── .gitignore</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="해결">해결<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-adding-files-failed#%ED%95%B4%EA%B2%B0" class="hash-link" aria-label="해결에 대한 직접 링크" title="해결에 대한 직접 링크">​</a></h2>
<p>해결 방법은 간단하다.</p>
<ul>
<li>
<p><strong>자동으로 생성된  <code>.git</code> 디렉토리를 삭제</strong> 한다.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ rm -rf .git .gitignore</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>]]></content:encoded>
            <category>devian-lab</category>
            <category>dev-posts</category>
            <category>git</category>
            <category>trouble shooting</category>
        </item>
        <item>
            <title><![CDATA[ReactNative - [Error] ES Lint - Parsing error]]></title>
            <link>https://jay2u8809.github.io/dev-posts/2022-05-28-error-eslint-parsing-error</link>
            <guid>https://jay2u8809.github.io/dev-posts/2022-05-28-error-eslint-parsing-error</guid>
            <pubDate>Sat, 28 May 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[React Native 에서 ES Lint 의 Parsing error 를 해결해 본다.]]></description>
            <content:encoded><![CDATA[<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">author</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dev.ian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">createdAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2022-05-28</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updatedAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2022-05-28</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<blockquote>
<p>ReactNative 의 EsLint 에러를 해결해 본다.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="intro">Intro<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-eslint-parsing-error#intro" class="hash-link" aria-label="Intro에 대한 직접 링크" title="Intro에 대한 직접 링크">​</a></h2>
<p>React Native 프로젝트에서 ES Lint 설정을 한 뒤, <code>.eslintrc.js</code> 파일을 조금 수정했다.</p>
<p>Typescript 를 사용하고 있기에 parserOptions 에 project 항목을 추가하여 <code>tsconfig.json</code> 파일을 참조하도록 했다.</p>
<ul>
<li>
<p><code>.eslintrc.js</code></p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ... </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  'parserOptions': {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    'ecmaFeatures': {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      'jsx': true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    'ecmaVersion': 12,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    'project': './tsconfig.json',</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>그리고 기본값으로 설정되어 있는 <code>package.json</code> 파일의 lint를 실행했다.</p>
<ul>
<li><code>package.json</code></li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  "scripts": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "lint": "eslint . --ext .js,.jsx,.ts,.tsx",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>실행</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ npm run lint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /${PROJECT_PATH}/${APP_NAME}/.eslintrc.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    0:0  error  Parsing error: "parserOptions.project" has been set for @typescript-eslint/parser.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  The file does not match your project config: .eslintrc.js.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  The file must be included in at least one of the projects provided</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /${PROJECT_PATH}/${APP_NAME}/babel.config.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    0:0  error  Parsing error: "parserOptions.project" has been set for @typescript-eslint/parser.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  The file does not match your project config: babel.config.js.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  The file must be included in at least one of the projects provided</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /${PROJECT_PATH}/${APP_NAME}/metro.config.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    0:0  error  Parsing error: "parserOptions.project" has been set for @typescript-eslint/parser.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  The file does not match your project config: metro.config.js.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  The file must be included in at least one of the projects provided</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="원인-분석">원인 분석<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-eslint-parsing-error#%EC%9B%90%EC%9D%B8-%EB%B6%84%EC%84%9D" class="hash-link" aria-label="원인 분석에 대한 직접 링크" title="원인 분석에 대한 직접 링크">​</a></h2>
<p>Error 로그를 읽어보니 <code>.eslintrc.js</code>, <code>babel.config.js</code>, <code>metro.config.js</code> 3개의 설정 파일들이 <code>.eslintrc.js</code> 파일에 방금 추가한 project 속성의 설정과 맞지 않는다고 한다.</p>
<p>Typescript 를 적용하면서 project 속성에 tsconfig.json 을 설정했는데 이게 문제였다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="해결">해결<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-eslint-parsing-error#%ED%95%B4%EA%B2%B0" class="hash-link" aria-label="해결에 대한 직접 링크" title="해결에 대한 직접 링크">​</a></h2>
<blockquote>
<p><code>.eslinltrc.js</code> 의 적용 대상에서 3개의 파일을 제외</p>
</blockquote>
<p>이 에러에 대해 구글링해보니 의외로 해결 방법은 간단했다. <code>.eslinltrc.js</code> 의  적용되는 대상에서 이 3개의 파일들을 제외하면 된다.</p>
<p>es lint 처리는 기본적으로 전체 프로젝트의 코드들을 대상으로 처리하기에 3개의 설정 파일(js)도 포함 된다. 하지만 이 3개의 설정 파일들은 es lint 처리를 할 필요가 없다. (직접적으로 코딩하는 파일이 아니므로)</p>
<p>더욱이 Typescript 로 코딩하기 때문에 ts, tsx 파일들만 lint 처리를 하면 된다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="특정-파일-형식ts-tsx-만-es-lint-체크-대상에-넣기">특정 파일 형식(*.ts, *.tsx) 만 ES Lint 체크 대상에 넣기<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-eslint-parsing-error#%ED%8A%B9%EC%A0%95-%ED%8C%8C%EC%9D%BC-%ED%98%95%EC%8B%9Dts-tsx-%EB%A7%8C-es-lint-%EC%B2%B4%ED%81%AC-%EB%8C%80%EC%83%81%EC%97%90-%EB%84%A3%EA%B8%B0" class="hash-link" aria-label="특정 파일 형식(*.ts, *.tsx) 만 ES Lint 체크 대상에 넣기에 대한 직접 링크" title="특정 파일 형식(*.ts, *.tsx) 만 ES Lint 체크 대상에 넣기에 대한 직접 링크">​</a></h3>
<ul>
<li>
<p><code>package.json</code></p>
<ul>
<li>*.js, *.jsx 파일을 대상에서 제외: <code>eslint . --ext .ts,.tsx</code></li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  "scripts": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "lint": "eslint . --ext .ts,.tsx",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="특정-디렉토리만-es-lint-체크-대상에-넣기">특정 디렉토리만 ES Lint 체크 대상에 넣기<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-eslint-parsing-error#%ED%8A%B9%EC%A0%95-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC%EB%A7%8C-es-lint-%EC%B2%B4%ED%81%AC-%EB%8C%80%EC%83%81%EC%97%90-%EB%84%A3%EA%B8%B0" class="hash-link" aria-label="특정 디렉토리만 ES Lint 체크 대상에 넣기에 대한 직접 링크" title="특정 디렉토리만 ES Lint 체크 대상에 넣기에 대한 직접 링크">​</a></h3>
<ul>
<li>
<p><code>package.json</code></p>
<ul>
<li>src 디렉토리만 대상으로 하기: <code>eslint . --ext .ts,.tsx src/</code></li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  "scripts": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "lint": "eslint . --ext .ts,.tsx src/",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<br>
<br>
<br>
<br>
<br>
<hr>
<ul>
<li>Refs<!-- -->
<ul>
<li><a href="https://dev-yakuza.posstree.com/ko/react-native/eslint-prettier-husky-lint-staged/" target="_blank" rel="noopener noreferrer">React Native에서 ESLint, Prettier를 프로처럼 사용하기</a></li>
</ul>
</li>
</ul>]]></content:encoded>
            <category>devian-lab</category>
            <category>dev-posts</category>
            <category>react native</category>
            <category>trouble shooting</category>
        </item>
        <item>
            <title><![CDATA[ReactNative - [Error] iOS - Could not get the simulator list from Xcode]]></title>
            <link>https://jay2u8809.github.io/dev-posts/2022-05-28-error-ios-could-not-get-simulator-list-from-xcode</link>
            <guid>https://jay2u8809.github.io/dev-posts/2022-05-28-error-ios-could-not-get-simulator-list-from-xcode</guid>
            <pubDate>Sat, 28 May 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[React Native 에서 발생한 xcode, podfile 관련 에러를 알아보고 해결해 본다.]]></description>
            <content:encoded><![CDATA[<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">author</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dev.ian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">createdAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2022-05-28</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updatedAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2022-05-28</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<blockquote>
<p>ReactNative 의 iOS 빌드 에러(xcode, podfile)를 해결해 본다.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="intro">Intro<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-ios-could-not-get-simulator-list-from-xcode#intro" class="hash-link" aria-label="Intro에 대한 직접 링크" title="Intro에 대한 직접 링크">​</a></h2>
<p>React Native 를 이용해 iOS 빌드 중 아래의 2가지 에러로 빌드에 실패했다. 2가지 에러에 대한 원인을 찾아보고 해결해 보기로 했다.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  error Could not find "Podfile.lock"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  error Could not get the simulator list from Xcode.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="error">Error<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-ios-could-not-get-simulator-list-from-xcode#error" class="hash-link" aria-label="Error에 대한 직접 링크" title="Error에 대한 직접 링크">​</a></h2>
<ul>
<li>
<p>빌드 실패 에러는 아래와 같다.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ npm run ios</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  error Could not find "Podfile.lock" at /${PROJECT_PATH}/ios/Podfile.lock. Did you run "pod install" in iOS directory?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  info Found Xcode project "${APP_NAME}.xcodeproj"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  xcrun: error: unable to find utility "simctl", not a developer tool or in PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  error Could not get the simulator list from Xcode. Please open Xcode and try running project directly from there to resolve the remaining issues. Run CLI with --verbose flag for more details.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Error: Command failed: xcrun simctl list --json devices</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  xcrun: error: unable to find utility "simctl", not a developer tool or in PATH</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="원인-분석">원인 분석<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-ios-could-not-get-simulator-list-from-xcode#%EC%9B%90%EC%9D%B8-%EB%B6%84%EC%84%9D" class="hash-link" aria-label="원인 분석에 대한 직접 링크" title="원인 분석에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-could-not-find-podfilelock">1) Could not find "Podfile.lock"<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-ios-could-not-get-simulator-list-from-xcode#1-could-not-find-podfilelock" class="hash-link" aria-label="1) Could not find &quot;Podfile.lock&quot;에 대한 직접 링크" title="1) Could not find &quot;Podfile.lock&quot;에 대한 직접 링크">​</a></h3>
<blockquote>
<p><em>CocoaPod이 처음부터 잘못 설치된 것이 원인인듯 하다.</em></p>
</blockquote>
<p>Pod 에 관한 에러는 이번이 처음이 아니었다. 처음 React Native 프로젝트 생성 당시에도 아래와 같은 에러가 발생하며 Pod 이 제대로 설치되지 않았다는 것을 알고 있었다.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  error Error: Failed to install CocoaPods dependencies for iOS project, which is required by this template.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>다만 그 때는 에러 로그에 나온 방법대로 <code>cd ./${APP_NAME}/ios &amp;&amp; pod install</code> 명령어를 통해 임시적으로 해결(묵인)하고 넘겼었다.</p>
<ul>
<li>
<p>React Native 프로젝트 생성 당시의 에러</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ npx react-native init ${APP_NAME} --template react-native-template-typescript</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ✔ Downloading template</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ✔ Copying template</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ✔ Processing template</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ✖ Installing CocoaPods dependencies (this may take a few minutes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ✖ Installing CocoaPods dependencies (this may take a few minutes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  error Error: Failed to install CocoaPods dependencies for iOS project, which is required by this template.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Please try again manually: "cd ./${APP_NAME}/ios &amp;&amp; pod install".</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CocoaPods documentation: https://cocoapods.org/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $ cd ./${APP_NAME}/ios &amp;&amp; pod install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-could-not-get-the-simulator-list-from-xcode">2) Could not get the simulator list from Xcode.<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-ios-could-not-get-simulator-list-from-xcode#2-could-not-get-the-simulator-list-from-xcode" class="hash-link" aria-label="2) Could not get the simulator list from Xcode.에 대한 직접 링크" title="2) Could not get the simulator list from Xcode.에 대한 직접 링크">​</a></h3>
<blockquote>
<p>Xcode Command Line Tools 의 설치 경로가 잘못되었다.</p>
</blockquote>
<ul>
<li><a href="https://mac.install.guide/commandlinetools/index.html" target="_blank" rel="noopener noreferrer">Xcode Command Line Tools</a>
<ul>
<li>Mac에서 개발 환경을 구축하기 위해서는 필수인 Tool 이다. Git부터 Xcode Command Line Tools가 없으면 사용이 불가능하다.</li>
<li><em>Xcode IDE</em> 에 포함되어 있기 때문에 Xcode IDE 를 사용한다면 별도의 설치가 필요없다.<!-- -->
<ul>
<li>다만, 앱 개발을 하는 경우가 아니라면 무겁고 용량도 많이 차지하는 Xcode IDE 보다는 가벼운 Xcode Command Line Tools 만 설치해도 된다.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>기존에 이미 설치되어 있었던 Xcode Command Line Tools 를 지우지 않고 Xcode IDE 를 설치했기 때문에, Xcode IDE 의 Xcode Command Line Tools 설치 경로와 기존의 설치 경로가 다르게 되면서 시뮬레이터의 실행에 실패한듯 하다.</p>
<ul>
<li>
<p>Xcode Command Line Tools 설치 경로 확인</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ xcode-select -print-path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /Library/Developer/CommandLineTools</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Xcode IDE 설치 경로</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  /Applications/Xcode.app/Contents/Developer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="해결">해결<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-ios-could-not-get-simulator-list-from-xcode#%ED%95%B4%EA%B2%B0" class="hash-link" aria-label="해결에 대한 직접 링크" title="해결에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-could-not-find-podfilelock-1">1) Could not find "Podfile.lock"<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-ios-could-not-get-simulator-list-from-xcode#1-could-not-find-podfilelock-1" class="hash-link" aria-label="1) Could not find &quot;Podfile.lock&quot;에 대한 직접 링크" title="1) Could not find &quot;Podfile.lock&quot;에 대한 직접 링크">​</a></h3>
<blockquote>
<p>CocoaPods 재설치</p>
</blockquote>
<p>에러 로그에 나와있듯이 (<code>Did you run "pod install" in iOS directory?</code>) <strong>ios 디렉토리로 이동</strong>하여 <strong>CocoaPods 를 다시 설치</strong> 해본다.</p>
<ul>
<li>
<p>ios 디렉토리로 이동</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ cd ios</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Install cocoapods</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ pod install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [Codegen] Generating ./build/generated/ios/React-Codegen.podspec.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Analyzing dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Fetching podspec for `DoubleConversion` from `../node_modules/react-native/third-party-podspecs/DoubleConversion.podspec`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [Codegen] Found FBReactNativeSpec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Fetching podspec for `RCT-Folly` from `../node_modules/react-native/third-party-podspecs/RCT-Folly.podspec`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Fetching podspec for `boost` from `../node_modules/react-native/third-party-podspecs/boost.podspec`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Fetching podspec for `glog` from `../node_modules/react-native/third-party-podspecs/glog.podspec`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [!] CocoaPods could not find compatible versions for pod "FlipperKit":</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    In Podfile:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      FlipperKit (= 0.125.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  None of your spec sources contain a spec satisfying the dependency: `FlipperKit (= 0.125.0)`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  You have either:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * out-of-date source repos which you can update with `pod repo update` or with `pod install --repo-update`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * mistyped the name or version.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * not added the source repo that hosts the Podspec to your Podfile.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>다시 에러가 발생했다. 로그를 보아하니 <strong>레포지토리의 업데이트가 필요</strong>한 듯하다.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  pod repo update or pod install --repo-update</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>레포지토리를 업데이트하고 다시 설치한다.</p>
<ul>
<li>
<p>Update Pod Repository</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ pod repo update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Updating spec repo `trunk`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Install cocoapods</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ pod install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [Codegen] Generating ./build/generated/ios/React-Codegen.podspec.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Analyzing dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Fetching podspec for `DoubleConversion` from `../node_modules/react-native/third-party-podspecs/DoubleConversion.podspec`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [Codegen] Found FBReactNativeSpec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Fetching podspec for `RCT-Folly` from `../node_modules/react-native/third-party-podspecs/RCT-Folly.podspec`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Fetching podspec for `boost` from `../node_modules/react-native/third-party-podspecs/boost.podspec`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Fetching podspec for `glog` from `../node_modules/react-native/third-party-podspecs/glog.podspec`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Downloading dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Installing CocoaAsyncSocket (7.6.5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Installing DoubleConversion (1.1.6)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Installing glog (0.3.5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Installing libevent (2.1.12)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Generating Pods project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /${PROJECT_NAME}/${APP_NAME}/ios/Pods/Target Support Files/Pods-${APP_NAME}/Pods-${APP_NAME}.release.xcconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /${PROJECT_NAME}/${APP_NAME}/ios/Pods/Target Support Files/Pods-${APP_NAME}/Pods-${APP_NAME}.debug.xcconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /${PROJECT_NAME}/${APP_NAME}/ios/Pods/Target Support Files/Pods-${APP_NAME}-${APP_NAME}Tests/Pods-${APP_NAME}-${APP_NAME}Tests.release.xcconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /${PROJECT_NAME}/${APP_NAME}/ios/Pods/Target Support Files/Pods-${APP_NAME}-${APP_NAME}Tests/Pods-${APP_NAME}-${APP_NAME}Tests.debug.xcconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  React-Core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Integrating client project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [!] Please close any current Xcode sessions and use `${APP_NAME}.xcworkspace` for this project from now on.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Pod installation complete! There are 55 dependencies from the Podfile and 46 total pods installed.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>이번에는 성공했다. 일단 첫 번째 에러는 해결된 듯 하다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-could-not-get-the-simulator-list-from-xcode-1">2) Could not get the simulator list from Xcode.<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-ios-could-not-get-simulator-list-from-xcode#2-could-not-get-the-simulator-list-from-xcode-1" class="hash-link" aria-label="2) Could not get the simulator list from Xcode.에 대한 직접 링크" title="2) Could not get the simulator list from Xcode.에 대한 직접 링크">​</a></h3>
<blockquote>
<p>Xcode Command Line Tools 의 설치 경로 변경</p>
</blockquote>
<p>이 에러는 좀더 간단하다. 터미널에서 몇 개의 명령어만 실행하면 금방 해결할 수 있었다.</p>
<ul>
<li>
<p>① Home 으로 이동</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ cd ~</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>② Xcode Command Line Tools 설치 경로 확인</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ xcode-select -print-path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /Library/Developer/CommandLineTools</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>③ Xcode IDE 설치 경로 확인: finder 등으로 확인한다.</p>
<ul>
<li>(내 로컬의 경우) /Applications/Xcode.app/Contents/Developer</li>
</ul>
</li>
<li>
<p>④ Xcode Command Line Tools 설치 경로를 Xcode IDE 의 설치 경로로 변경</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Password: 비밀번호 입력</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>⑤ Xcode Command Line Tools 설치 경로 확인</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ xcode-select -print-path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /Applications/Xcode.app/Contents/Developer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ios-build">iOS Build<a href="https://jay2u8809.github.io/dev-posts/2022-05-28-error-ios-could-not-get-simulator-list-from-xcode#ios-build" class="hash-link" aria-label="iOS Build에 대한 직접 링크" title="iOS Build에 대한 직접 링크">​</a></h2>
<p>2가지 에러가 해결되었는지 확인을 위해 다시 한 번 ios 를 빌드해 본다.</p>
<ul>
<li>
<p>프로젝트 디렉토리로 이동하여 실행</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ npm run ios</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; ${APP_NAME}@0.0.1 ios</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; react-native run-ios</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  info Found Xcode workspace "${APP_NAME}.xcworkspace"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  info Building (using "xcodebuild -workspace ${APP_NAME}.xcworkspace -configuration Debug -scheme ${APP_NAME} -destination ...")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  success Successfully built the app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  success Successfully launched the app on the simulator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>빌드가 성공적으로 끝나고 Xcode 시뮬레이터가 실행되었다. 정상적으로 리액트 기본 앱이 실행되는 것을 확인 할 수 있다.</p>
<br>
<br>
<br>
<br>
<br>
<hr>
<ul>
<li>Refs<!-- -->
<ul>
<li><a href="https://reactnative.dev/docs/environment-setup" target="_blank" rel="noopener noreferrer">공식 사이트의 튜토리얼</a></li>
</ul>
</li>
</ul>]]></content:encoded>
            <category>devian-lab</category>
            <category>dev-posts</category>
            <category>react native</category>
            <category>trouble shooting</category>
            <category>ios</category>
        </item>
        <item>
            <title><![CDATA[ReactNative - [Error] Android - DeviceException]]></title>
            <link>https://jay2u8809.github.io/dev-posts/2022-05-27-error-android-device-exception</link>
            <guid>https://jay2u8809.github.io/dev-posts/2022-05-27-error-android-device-exception</guid>
            <pubDate>Fri, 27 May 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[React Native 에서 발생한 Android 빌드 에러를 해결해 본다.]]></description>
            <content:encoded><![CDATA[<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">author</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dev.ian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">createdAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2022-05-27</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updatedAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token datetime number" style="color:#36acaa">2022-05-27</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<blockquote>
<p>ReactNative 의 안드로이드 빌드 에러(DeviceException)를 해결해 본다.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="intro">Intro<a href="https://jay2u8809.github.io/dev-posts/2022-05-27-error-android-device-exception#intro" class="hash-link" aria-label="Intro에 대한 직접 링크" title="Intro에 대한 직접 링크">​</a></h2>
<p>React Native 를 이용해 Android 빌드 중 아래의 에러로 빌드에 실패했다.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  Execution failed for task ':app:installDebug'.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; com.android.builder.testing.api.DeviceException: No connected devices!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="error">Error<a href="https://jay2u8809.github.io/dev-posts/2022-05-27-error-android-device-exception#error" class="hash-link" aria-label="Error에 대한 직접 링크" title="Error에 대한 직접 링크">​</a></h2>
<ul>
<li>
<p>빌드 실패 에러는 아래와 같다.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ npx react-native run-android</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  info Running jetifier to migrate libraries to AndroidX. You can disable it using "--no-jetifier" flag.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Jetifier found 936 file(s) to forward-jetify. Using 4 workers...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  info JS server already running.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  info Launching emulator...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  error Failed to launch emulator. Reason: Could not start emulator within 30 seconds..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  warn Please launch an emulator manually or connect a device. Otherwise app may fail to launch.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  info Installing the app...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; Configure project :app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Unable to detect AGP versions for included builds. All projects in the build should use the same AGP version. Class name for the included build object: org.gradle.composite.internal.DefaultIncludedBuild$IncludedBuildImpl_Decorated.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; Task :app:installDebug FAILED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  37 actionable tasks: 2 executed, 35 up-to-date</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  FAILURE: Build failed with an exception.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * What went wrong:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Execution failed for task ':app:installDebug'.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; com.android.builder.testing.api.DeviceException: No connected devices!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; Run with --stacktrace option to get the stack trace.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; Run with --info or --debug option to get more log output.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; Run with --scan to get full insights.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Get more help at https://help.gradle.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  BUILD FAILED in 9s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  error Failed to install the app. Make sure you have an Android emulator running or a device connected.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Error: Command failed: ./gradlew app:installDebug -PreactNativeDevServerPort=8081</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  FAILURE: Build failed with an exception.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * What went wrong:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Execution failed for task ':app:installDebug'.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; com.android.builder.testing.api.DeviceException: No connected devices!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; Run with --stacktrace option to get the stack trace.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; Run with --info or --debug option to get more log output.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; Run with --scan to get full insights.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Get more help at https://help.gradle.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  BUILD FAILED in 9s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      at makeError (/${PROJECT_PATH}/${APP_NAME}/node_modules/@react-native-community/cli-platform-android/node_modules/execa/index.js:174:9)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      at /${PROJECT_PATH}/${APP_NAME}/node_modules/@react-native-community/cli-platform-android/node_modules/execa/index.js:278:16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      at processTicksAndRejections (node:internal/process/task_queues:96:5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      at async runOnAllDevices (/${PROJECT_PATH}/${APP_NAME}/node_modules/@react-native-community/cli-platform-android/build/commands/runAndroid/runOnAllDevices.js:109:5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      at async Command.handleAction (/${PROJECT_PATH}/${APP_NAME}/node_modules/@react-native-community/cli/build/index.js:192:9)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  info Run CLI with --verbose flag for more details.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="원인-분석">원인 분석<a href="https://jay2u8809.github.io/dev-posts/2022-05-27-error-android-device-exception#%EC%9B%90%EC%9D%B8-%EB%B6%84%EC%84%9D" class="hash-link" aria-label="원인 분석에 대한 직접 링크" title="원인 분석에 대한 직접 링크">​</a></h2>
<blockquote>
<p>JAVA_HOME 환경변수가 설정되어 있지 않았기 때문에 jdk 를 찾을 수 없다</p>
</blockquote>
<p>이 에러 메시지를 구글링 해보니 JAVA_HOME 환경변수가 설정되어 있지 않았기 때문에 jdk 를 찾을 수 없을 때 나타나는 에러라고 한다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="java_home">JAVA_HOME<a href="https://jay2u8809.github.io/dev-posts/2022-05-27-error-android-device-exception#java_home" class="hash-link" aria-label="JAVA_HOME에 대한 직접 링크" title="JAVA_HOME에 대한 직접 링크">​</a></h3>
<ul>
<li>
<p>Java 프로그래밍이나 jvm 프로그램들을 실행하기 위해서는 <strong>JAVA_HOME</strong> 변수 를 시스템(OS)에 등록해야 한다.</p>
<ul>
<li>등록하지 않을 경우, 매번 시스템(OS)의 jdk 경로를 지정해줘야 한다.</li>
</ul>
</li>
<li>
<p><strong>JAVA_HOME</strong> 변수는 일종의 전역 변수(<em>Global Variable</em>) 이다.</p>
<ul>
<li>시스템(OS)의 전역 변수로서 <strong>JAVA_HOME</strong> 이라는 전역 변수를 시스템(OS)에 등록하면 시스템(OS) 어디서든 java 를 실행하고 사용할 수 있다.</li>
</ul>
</li>
<li>
<p>Andriod Studio 나 IntelliJ, Tomcat 등의 java 를 이용하는 프로그램들이 Build, BootRun, Emulator 등을 실행 할 때, 별도로 jdk 의 경로를 지정해주지 않아도 시스템(OS)의 <strong>JAVA_HOME</strong> 이라는 변수를 불러와 사용한다.</p>
<ul>
<li>JDK 경로는 <strong>JAVA_HOME</strong> 에 저장되어 있다는 약속</li>
<li>이 약속된 변수 <strong>JAVA_HOME</strong> 이 없었기에 빌드에 실패했다. 따라서 이 변수를 지정해주어야 한다.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="해결">해결<a href="https://jay2u8809.github.io/dev-posts/2022-05-27-error-android-device-exception#%ED%95%B4%EA%B2%B0" class="hash-link" aria-label="해결에 대한 직접 링크" title="해결에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="java_home-환경변수-설정">JAVA_HOME 환경변수 설정<a href="https://jay2u8809.github.io/dev-posts/2022-05-27-error-android-device-exception#java_home-%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-%EC%84%A4%EC%A0%95" class="hash-link" aria-label="JAVA_HOME 환경변수 설정에 대한 직접 링크" title="JAVA_HOME 환경변수 설정에 대한 직접 링크">​</a></h3>
<ul>
<li>
<p>① Home 으로 이동</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ cd ~</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>② JAVA_HOME 환경변수가 없을 경우 가장 아래쪽에 추가</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ echo export JAVA_HOME= /Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home &gt;&gt; .zshrc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>③ zshrc 적용</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ source .zshrc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>④ JAVA_HOME 확인</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ echo $JAVA_HOME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="android-build">Android Build<a href="https://jay2u8809.github.io/dev-posts/2022-05-27-error-android-device-exception#android-build" class="hash-link" aria-label="Android Build에 대한 직접 링크" title="Android Build에 대한 직접 링크">​</a></h3>
<p>에러가 해결되었는지 확인을 위해 다시 한 번 ios 를 빌드해 본다.</p>
<ul>
<li>
<p>프로젝트 디렉토리로 이동하여 실행</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  $ npx react-native run-android</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  info Running jetifier to migrate libraries to AndroidX. You can disable it using "--no-jetifier" flag.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Jetifier found 936 file(s) to forward-jetify. Using 4 workers...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  info JS server already running.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  info Installing the app...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; Configure project :app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Unable to detect AGP versions for included builds. All projects in the build should use the same AGP version. Class name for the included build object: org.gradle.composite.internal.DefaultIncludedBuild$IncludedBuildImpl_Decorated.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &gt; Task :app:installDebug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Installing APK 'app-debug.apk' on 'Nexus_6_API_30(AVD) - 11' for app:debug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Installed on 1 device.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  BUILD SUCCESSFUL in 11s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  37 actionable tasks: 2 executed, 35 up-to-date</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  info Connecting to the development server...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  8081</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  info Starting the app on "emulator-5554"...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Starting: Intent { cmp=com.${APP_NAME}/.MainActivity }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>빌드가 성공적으로 끝나고 Android 시뮬레이터가 실행되었다. 정상적으로 리액트 기본 앱이 실행되는 것을 확인 할 수 있다.</p>
<br>
<br>
<br>
<br>
<br>
<hr>
<ul>
<li>Refs<!-- -->
<ul>
<li><a href="https://reactnative.dev/docs/environment-setup" target="_blank" rel="noopener noreferrer">공식 사이트의 튜토리얼</a></li>
</ul>
</li>
</ul>]]></content:encoded>
            <category>devian-lab</category>
            <category>dev-posts</category>
            <category>react native</category>
            <category>trouble shooting</category>
            <category>android</category>
        </item>
    </channel>
</rss>